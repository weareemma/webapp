import{o,e as I,b as v,r as g,c as l,a as t,a5 as T,L as b,V as J,g as K,B as Q,y as R,U as e,K as p,q as f,J as z,Q as _,w as y,ae as W,a8 as c,al as H,I as F,Y as X,S as V,E as B}from"./app.c248d67c.js";import{u as Z}from"./wizardStore.2226bc2a.js";import"./VueTimepikcer.esm.6176b535.js";function L(M,x){return o(),I("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 5l7 7-7 7"})])}const ee={class:"bb-collapsible"},te={key:0,class:"bb-collpsible__content"},E={__name:"Collapsible",props:{startOpen:{type:Boolean,default:!1}},setup(M,{expose:x}){const n=g(M.startOpen);function C(){n.value=!0}function k(){n.value=!1}return x({open:C}),(w,D)=>(o(),l("div",ee,[t("div",{class:"bb-collpsible__toggle",onClick:D[0]||(D[0]=S=>n.value=!n.value)},[T(w.$slots,"toggle",{isOpen:n.value,close:k})]),n.value?(o(),l("div",te,[T(w.$slots,"content",{isOpen:n.value,close:k})])):b("",!0)]))}},ae=t("div",{class:"text-center mb-16"}," Seleziona il giorno e l\u2019ora del tuo appuntamento ",-1),se={class:"space-y-4 max-w-xl mx-auto"},oe={key:0},le={class:"bg-[#A9D6DB] rounded-xl p-8 mb-4"},ie={class:"flex items-center justify-between mb-4"},ne={class:"text-lg"},re={key:0},de={key:1},ce={class:"relative overflow-x-auto"},ue={class:"flex space-x-8 pb-4"},pe=["onClick"],_e=t("div",{class:"mb-2 font-bold"}," Altro ",-1),be=t("div",null," + ",-1),ve=[be],me={key:0},he=t("p",{class:"text-center my-5 px-8"},[V(" Sembra che non ci siano slot liberi. "),t("br"),V(" Prova a modificare la prenotazione oppure contattaci. ")],-1),fe=[he],ye={key:1},ge={class:"flex justify-between items-center"},xe={class:"font-bold"},ke={key:0,class:"mt-4"},we={class:"flex items-center justify-between py-2 px-8 bg-[#A9D6DB] rounded-full cursor-pointer mb-4"},De={class:"font-bold"},Ye={key:0},Me={key:1},Ce={class:"space-y-4"},Se=["disabled","onClick"],ze={key:2},Be={class:"flex items-center justify-between py-2 px-8 bg-[#A9D6DB] rounded-full cursor-pointer mb-4"},Ve={class:"font-bold"},Ae={key:0},je={key:1},Oe={class:"space-y-4"},$e=["disabled","onClick"],Ne=V(" Avanti "),Te={key:1},Fe=t("div",{class:"bg-[#A9D6DB] rounded-xl p-8 mb-4"},[t("div",{class:"flex justify-start items-center gap-2"},[t("p",{class:"text-center"}," Stiamo verificando la disponibilit\xE0 ")])],-1),Le=[Fe],Ue={__name:"StepCalendar",setup(M){const x=Z(),{wizardSelection:a,isValid:n,activeStep:C,ready:k,people:w,wizardGeneral:D}=J(x),S=B("updateData");B("prev");const P=B("next"),m=g(!1),Y=g(null),U=K(()=>!a.value.available_days.find(r=>r.available)),h=g(null),A=g([{time:"08:00",available:!0},{time:"08:15",available:!0},{time:"08:30",available:!0}]);Q(h,r=>{console.log(c(r).format("YYYY-MM-DD")),H.post(route("checkAvailability.single"),{...D.value,...a.value,people:w.value,day:c(r).format("YYYY-MM-DD")}).then(d=>{console.log(d.data),A.value=d.data})}),R(()=>{});function j(r){a.value.selected_day=r,a.value.selected_slot=null,Y.value&&Y.value.open(),S()}function O(r){a.value.selected_slot=r,S()}return(r,d)=>{var $,N;const q=F("datepicker"),G=F("bb-button");return o(),l("div",null,[ae,t("div",se,[e(a).available_days?(o(),l("div",oe,[t("div",le,[t("div",null,[t("div",ie,[t("h3",ne,[e(a).selected_day?(o(),l("span",re,p(e(c)(($=e(a).selected_day)==null?void 0:$.date).format("dddd DD MMMM")),1)):(o(),l("span",de,"Seleziona un giorno"))])]),t("div",ce,[t("div",ue,[(o(!0),l(f,null,z(e(a).available_days,i=>{var s,u;return o(),l("div",{key:i.date,class:_(["group cursor-pointer flex flex-col items-center",{"opacity-40":!i.available}]),onClick:()=>{i.available&&j(i),m.value=!1}},[t("div",{class:_(["mb-2",{"font-bold":((s=e(a).selected_day)==null?void 0:s.date)===i.date}])},p(e(X).capitalizeFirstLetter(e(c)(i.date).format("ddd"))),3),t("div",{class:_(["rounded-full bg-white w-12 h-12 grid place-items-center",{"group-hover:bg-bb-primary group-hover:text-white":i.available,"bg-bb-primary-800 group-hover:bg-bb-primary-800 text-white":((u=e(a).selected_day)==null?void 0:u.date)==i.date}])},[t("div",null,p(e(c)(i.date).format("DD")),1)],2)],10,pe)}),128)),t("div",{class:"group cursor-pointer flex flex-col items-center",onClick:d[0]||(d[0]=()=>{e(a).selected_day=null,e(a).selected_slot=null,h.value=e(c)(e(a).available_days.slice(-1)[0].date,"YYYY-MM-DD").add(1,"day").format("YYYY-MM-DD"),m.value=!0})},[_e,t("div",{class:_(["rounded-full bg-white w-12 h-12 grid place-items-center",{"group-hover:bg-bb-primary group-hover:text-white":!0,"bg-bb-primary-800 group-hover:bg-bb-primary-800 text-white":m.value}])},ve,2)])])])])]),e(U)?(o(),l("div",me,fe)):b("",!0),m.value?(o(),l("div",ye,[t("div",ge,[v(q,{class:"bb-datepicker-button",locale:"it-IT",enableTimePicker:!1,monthNameFormat:"long",autoApply:"",minDate:e(c)(e(a).available_days.slice(-1)[0].date,"YYYY-MM-DD").add(1,"day").format("YYYY-MM-DD"),modelValue:h.value,"onUpdate:modelValue":[d[1]||(d[1]=i=>h.value=i),d[2]||(d[2]=()=>{j({date:e(c)(h.value).format("YYYY-MM-DD")})})]},null,8,["minDate","modelValue"]),t("p",xe,p(e(a).selected_day?e(c)((N=e(a).selected_day)==null?void 0:N.date).format("dddd DD MMMM"):""),1)]),e(a).selected_day?(o(),l("div",ke,[t("div",null,[v(E,{ref_key:"slotsCollapsible",ref:Y,"start-open":!0},{toggle:y(({isOpen:i})=>{var s;return[t("div",we,[t("div",De,[e(a).selected_slot?(o(),l("span",Ye," Orario selezionato: "+p((s=e(a).selected_slot)==null?void 0:s.time),1)):(o(),l("span",Me,"Seleziona un'orario"))]),v(e(L),{class:_(["w-4 h-4 text-white transition transform-gpu",{"rotate-90":i}])},null,8,["class"])])]}),content:y(({close:i})=>[t("div",Ce,[(o(!0),l(f,null,z(A.value,s=>{var u;return o(),l(f,{key:s.time},[s.available?(o(),l("button",{key:0,disabled:!s.available,class:_(["rounded-full bg-white w-full shadow px-2 py-2 text-lg text-center cursor-pointer transition-colors disabled:opacity-30",{"hover:bg-bb-primary hover:text-white":s.available,"bg-bb-primary-800 hover:bg-bb-primary-800 text-white":((u=e(a).selected_slot)==null?void 0:u.time)==s.time}]),onClick:()=>{s.available&&(O(s),i())}},p(s.time),11,Se)):b("",!0)],64)}),128))])]),_:1},512)])])):b("",!0)])):b("",!0),e(a).selected_day&&!m.value?(o(),l("div",ze,[v(E,{ref_key:"slotsCollapsible",ref:Y,"start-open":!0},{toggle:y(({isOpen:i})=>{var s;return[t("div",Be,[t("div",Ve,[e(a).selected_slot?(o(),l("span",Ae," Orario selezionato: "+p((s=e(a).selected_slot)==null?void 0:s.time),1)):(o(),l("span",je,"Seleziona un'orario"))]),v(e(L),{class:_(["w-4 h-4 text-white transition transform-gpu",{"rotate-90":i}])},null,8,["class"])])]}),content:y(({close:i})=>[t("div",Oe,[(o(!0),l(f,null,z(e(a).selected_day.slots,s=>{var u;return o(),l(f,{key:s.time},[s.available?(o(),l("button",{key:0,disabled:!s.available,class:_(["rounded-full bg-white w-full shadow px-2 py-2 text-lg text-center cursor-pointer transition-colors disabled:opacity-30",{"hover:bg-bb-primary hover:text-white":s.available,"bg-bb-primary-800 hover:bg-bb-primary-800 text-white":((u=e(a).selected_slot)==null?void 0:u.time)==s.time}]),onClick:()=>{s.available&&(O(s),i())}},p(s.time),11,$e)):b("",!0)],64)}),128))])]),_:1},512)])):b("",!0),e(n)[e(C).next]?(o(),I(G,{key:3,class:"w-full mt-10",outline:"",onClick:W(e(P),["stop"]),disabled:!e(k)},{default:y(()=>[Ne]),_:1},8,["onClick","disabled"])):b("",!0)])):(o(),l("div",Te,Le))])])}}};export{Ue as default};
