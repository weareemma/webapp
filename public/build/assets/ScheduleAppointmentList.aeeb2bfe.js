import{r as s,o as _,c as b,a as l,b as a,w as t,U as f,q as A,a9 as C,X as v,I as i,K as h,L as F,a8 as g,S as y}from"./app.c248d67c.js";import{B as z}from"./Table.94a0e2ae.js";import{B as I}from"./Popover.a6db3f26.js";import N from"./ScheduleAppointmentStatusBadge.3b648ebd.js";import"./PencilIcon.50f1eb3f.js";import"./RefreshIcon.6547917e.js";import"./CheckIcon.5f685430.js";const E={class:"bg-white rounded-xl overflow-hidden truncate"},H={key:0,class:"bg-[#FFDEAD] rounded-full h-7 w-7 grid place-items-center"},L=l("img",{src:"/img/alert-icon.svg",class:"w-4 h-4"},null,-1),Y=[L],$={class:"bg-bb-primary text-white rounded text-xs p-4 max-w-[124px]"},j=y(" Elimina appuntamento "),T=l("p",null,"Una volta eliminato, non potrai pi\xF9 recuperare le informazioni.",-1),U=l("br",null,null,-1),M=l("p",null,"Scegli una modalit\xE0 di cancellazione",-1),O=y(" Elimina "),Q={__name:"ScheduleAppointmentList",props:{collection:Array,links:Object},setup(m){const p=s(null),r=s(null),u=s(!1),c=s("refund");function k(d,o){switch(d){case"view":v.Inertia.visit(route("booking.show",o.id));break;case"delete":p.value=C(o),r.value.open();break}}function w(){u.value=!0,v.Inertia.delete(route("booking.destroy",p.value.id),{data:{method:c.value},onFinish:()=>{helpers.flash({type:"success",message:"Appuntamento cancellato"}),r.value.close(),emit("deleted"),u.value=!1}})}return(d,o)=>{const B=i("Link"),x=i("bb-radio-group"),D=i("BbButton"),S=i("BbDialog");return _(),b(A,null,[l("div",E,[a(z,{collection:m.collection,columns:[{label:"Data",computed:e=>e.date?f(g)(e.date).format("DD/MM/YYYY"):"-"},{label:"Ora",computed:e=>{if(!e.start)return"-";const n=f(g)(`2000-01-01 ${e.start}`),V=n.add(e.total_execution_time,"minutes");return`${n.format("HH:mm")} - ${V.format("HH:mm")}`}},{slot:"customer",label:"Cliente"},{label:"Stylist",key:"stylist.full_name"},{label:"Servizi",computed:e=>e.slots?e.slots.map(n=>n.service.title).join(" - "):"-",classes:"max-w-[240px]"},{label:"Status",slot:"status"},{label:"",slot:"to_pay"}],links:m.links,actions:[{name:"view",condition:e=>!e.deleted_at},{name:"delete",condition:e=>!e.deleted_at}],onAction:o[0]||(o[0]=e=>k(e.action,e.item))},{status:t(({item:e})=>[a(N,{status:e.status},null,8,["status"])]),customer:t(({item:e})=>[a(B,{href:d.route("customer.show",e.customer.id),class:"underline"},{default:t(()=>[l("strong",null,h(e.customer.full_name),1)]),_:2},1032,["href"])]),to_pay:t(({item:e})=>[a(I,{mode:"hover",class:"h-7 w-7"},{button:t(()=>[e.amount_to_pay>0?(_(),b("div",H,Y)):F("",!0)]),panel:t(()=>[l("div",$," Il cliente deve pagare in store "+h(e.amount_to_pay)+"\u20AC ",1)]),_:2},1024)]),_:1},8,["collection","columns","links","actions"])]),a(S,{ref_key:"deleteDialog",ref:r,type:"plain",size:"sm"},{title:t(()=>[j]),buttons:t(()=>[a(D,{danger:"",disabled:u.value,onClick:w},{default:t(()=>[O]),_:1},8,["disabled"])]),default:t(()=>[T,U,M,a(x,{class:"py-2",modelValue:c.value,"onUpdate:modelValue":o[1]||(o[1]=e=>c.value=e),vertical:!0,options:[{value:"refund",label:"Rimborso"},{value:"discount",label:"Genera sconto"},{value:"none",label:"Nessuna azione"}]},null,8,["modelValue"])]),_:1},512)],64)}}};export{Q as default};
