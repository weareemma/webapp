import{g as w,r as u,o as d,e as z,w as a,W as A,a as o,b as l,U as m,ag as C,a4 as N,Q as j,K as p,c as h,J as M,q as P,S as f,X as k,Y as T,a8 as n,I as b}from"./app.c248d67c.js";import{_ as E}from"./AppLayout.4269b78a.js";import{B as L}from"./Table.94a0e2ae.js";import{B as q}from"./SearchInput.2608ef07.js";import{u as Q}from"./search.181f2eee.js";import"./Logo.d971df1b.js";import"./wizardStore.2226bc2a.js";import"./menu.6da08311.js";import"./ChevronDownIcon.f3847a45.js";import"./CheckIcon.5f685430.js";import"./XIcon.0ce515ba.js";import"./PencilIcon.50f1eb3f.js";import"./RefreshIcon.6547917e.js";const U={class:"flex justify-between mb-4"},F={class:"w-1/2"},J=o("div",{class:"grow flex justify-end mr-3"},null,-1),K=f("Aggiungi"),O={class:"bb-card"},R=f(" Elimina Pacchetto "),W=o("span",null,"Sei sicuro di voler eliminare questo pacchetto?",-1),X=f(" Elimina "),ce={__name:"Index",props:{models:Object},setup(_){w(()=>A().props.value.role);const{searchQuery:i,isSearching:B}=Q("package.index"),r=u(null),g=u(null),c=u(!1);function y(t,s){switch(t){case"edit":k.Inertia.visit(route("package.edit",s.id));break;case"delete":g.value=s,r.value.open();break}}function x(){c.value=!0,k.Inertia.delete(route("package.destroy",g.value.id),{onSuccess:t=>{r.value.close(),c.value=!1,T.helpers.flash(t.props.flash)}})}function S(t){return n(t.expired_at,"DD-MM-YYYY").isBefore(n())?"bb-badge-danger":t.active?"bb-badge-success":"bb-badge-secondary"}function D(t){return n(t.expired_at,"DD-MM-YYYY").isBefore(n())?"Scaduto":t.active?"Attivo":"Non attivo"}return(t,s)=>{const Y=b("bb-button"),I=b("BbButton"),V=b("BbDialog");return d(),z(E,{title:"Pacchetti"},{default:a(()=>[o("div",U,[o("div",F,[l(q,{searching:m(B),modelValue:m(i),"onUpdate:modelValue":s[0]||(s[0]=e=>C(i)?i.value=e:null)},null,8,["searching","modelValue"])]),J,l(m(N),{href:t.route("package.create")},{default:a(()=>[l(Y,{type:"button"},{default:a(()=>[K]),_:1})]),_:1},8,["href"])]),o("div",O,[l(L,{collection:_.models.data,columns:[{key:"name",label:"Nome",classes:"font-bold"},{slot:"services",label:"Servizi"},{key:"expired_at",label:"Scadenza"},{key:"price",label:"Prezzo (IVA incl.)",format:"currency"},{slot:"stores",label:"Store"},{slot:"active",label:"Stato"}],links:_.models.links,actions:[{name:"edit",condition:e=>!0},{name:"delete",condition:e=>!0}],onAction:s[1]||(s[1]=e=>y(e.action,e.item))},{active:a(({item:e})=>[o("span",{class:j(S(e))},p(D(e)),3)]),services:a(({item:e})=>[(d(!0),h(P,null,M(e.services_formatted,v=>(d(),h("p",{key:v},p(v),1))),128))]),stores:a(({item:e})=>[o("p",null,p(e.stores_formatted),1)]),_:1},8,["collection","columns","links","actions"])]),l(V,{ref_key:"deleteDialog",ref:r,type:"plain",size:"sm"},{title:a(()=>[R]),buttons:a(()=>[l(I,{danger:"",disabled:c.value,onClick:x},{default:a(()=>[X]),_:1},8,["disabled"])]),default:a(()=>[W]),_:1},512)]),_:1})}}};export{ce as default};
