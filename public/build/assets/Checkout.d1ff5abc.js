import{a as K}from"./CheckoutCharge.1cfb124f.js";import{_ as $}from"./CustomerLayout.eb07e70f.js";import{r as o,W as _,a9 as z,y as P,Y as x,o as n,e as U,w as r,a as e,b as d,c as u,K as a,L as V,U as A,a8 as W,S,I as f}from"./app.c248d67c.js";import"./wizardStore.2226bc2a.js";import"./Logo.d971df1b.js";import"./Footer.0f48e628.js";import"./XIcon.0ce515ba.js";import"./PencilIcon.50f1eb3f.js";import"./disclosure.e9de6139.js";import"./menu.6da08311.js";const I=e("h3",{class:"text-xl text-bb-blue-500 font-extrabold mb-5 text-center"},"Checkout",-1),L={class:"p-0 w-full mx-auto"},G={class:"grid grid-cols-1 md:grid-cols-3 gap-y-10 gap-x-10"},H={class:"col-span-1 flex flex-col justify-between"},J={key:0},Q=e("p",{class:"text-white font-bold text-xl mb-1"},"Acquisto pacchetto",-1),R={class:"text-white mb-2"},X=e("div",{class:"w-full h-[1px] bg-white my-5"},null,-1),Z={class:"flex justify-between flex-wrap items-center gap-y-2 mb-5"},ee=e("p",{class:"text-white font-bold"},"Totale",-1),te={class:"text-white font-extrabold text-2xl"},oe={key:1},se=e("p",{class:"text-white font-bold text-xl mb-1"},"Acquisto abbonamento",-1),ae={class:"text-white mb-2"},ie={class:"text-white mb-2"},le=e("div",{class:"w-full h-[1px] bg-white my-5"},null,-1),ce={class:"flex justify-between flex-wrap items-center gap-y-2 mb-5"},ne={class:"text-white font-extrabold text-2xl"},re={key:0},de={class:"text-white font-extrabold text-lg"},ue={key:1},me={class:"text-white"},pe=S(" Scade il "),he={class:"text-white font-extrabold text-lg"},be=S("Acquista"),_e={class:"flex justify-start items-center mt-5"},xe=e("a",{target:"_blank",href:"https://weareemma.ac-page.com/terms-and-conditions"},"Accetta i termini e le condizioni",-1),fe=e("div",{class:"col-span-2 flex justify-end items-center"},[e("img",{class:"max-w-auto lg:max-w-[400px] rounded-lg",src:"/img/wow-experience.jpg"})],-1),Se={__name:"Checkout",props:{user:Object,intent:Object,stripeKey:String,checkoutType:String,totalAmount:Number,model:Object,prices:Object},setup(t){const s=t,m=o(null),i=o(null),p=o(null),B=o(_().props.value.customer.current_price),N=o(_().props.value.promo_name),D=o(_().props.value.promo_expires),Y=z({price_id:null}),h=o(!1);P(()=>{if(x.lg(s.model),s.totalAmount&&(i.value=s.totalAmount),s.checkoutType==="package"&&(m.value=s.model),s.checkoutType==="subscription"){let l=s.prices[0];i.value=Math.round(l.price),m.value=l,p.value=l}});const M=()=>{x.flash({type:"error",message:"Devi accettare i termini e le condizioni"})},b=o(!1);function O(l){b.value=!0,Y.transform(c=>({...c,price_id:p.value.id})).post(route("subscription.swap"),{onSuccess:()=>l(),onError:()=>b.value=!1,onFinish:c=>{}})}return(l,c)=>{const q=f("bb-button"),E=f("bb-checkbox"),F=f("bb-label");return n(),U($,{title:"Checkout"},{default:r(()=>[I,e("div",L,[d(K,{user:t.user,intent:t.intent,"stripe-key":t.stripeKey,type:t.checkoutType,"total-amount":i.value,"additional-payload":m.value,formVisible:!0,"enable-loading-overlay":!0},{summary:r(({buy:v})=>{var y,w,g,k,j,T;return[e("div",G,[e("div",H,[t.checkoutType==="package"?(n(),u("div",J,[Q,e("p",R,a((y=t.model)==null?void 0:y.name),1),X,e("div",Z,[ee,e("p",te,a((w=t.model)==null?void 0:w.price)+" \u20AC",1)])])):V("",!0),t.checkoutType==="subscription"?(n(),u("div",oe,[se,e("p",ae,a((g=t.model)==null?void 0:g.name),1),e("p",ie,a((k=t.model)==null?void 0:k.description),1),le,e("div",ce,[e("p",ne,a(i.value?i.value+" \u20AC":"-"),1),((j=t.model)==null?void 0:j.name)!==N.value?(n(),u("div",re,[e("p",de,a(A(x).durationFormatted((T=p.value)==null?void 0:T.duration)),1)])):(n(),u("div",ue,[e("p",me,[pe,e("span",he,a(A(W)(D.value).format("DD/MM/YYYY")),1)])]))])])):V("",!0),d(q,{disabled:i.value===null||b.value,light:"",onClick:C=>h.value?B.value&&t.checkoutType==="subscription"?O(v):v():M()},{default:r(()=>[be]),_:2},1032,["disabled","onClick"]),e("div",_e,[d(E,{modelValue:h.value,"onUpdate:modelValue":c[0]||(c[0]=C=>h.value=C)},null,8,["modelValue"]),d(F,{class:"mx-3 text-white"},{default:r(()=>[xe]),_:1})])]),fe])]}),_:1},8,["user","intent","stripe-key","type","total-amount","additional-payload"])])]),_:1})}}};export{Se as default};
