import{g as I,r as m,o as r,e as N,w as t,W as C,a as o,b as i,U as _,ag as q,a4 as T,c as d,K as n,Q as l,L as p,S as y,X as B,Y as j,I as f}from"./app.c248d67c.js";import{_ as E}from"./AppLayout.4269b78a.js";import{B as z}from"./Table.94a0e2ae.js";import{B as L}from"./SearchInput.2608ef07.js";import{u as P}from"./search.181f2eee.js";import"./Logo.d971df1b.js";import"./wizardStore.2226bc2a.js";import"./menu.6da08311.js";import"./ChevronDownIcon.f3847a45.js";import"./CheckIcon.5f685430.js";import"./XIcon.0ce515ba.js";import"./PencilIcon.50f1eb3f.js";import"./RefreshIcon.6547917e.js";const Q={class:"flex justify-between mb-4"},U={class:"w-1/2"},$=o("div",{class:"grow flex justify-end mr-3"},null,-1),K=y("Aggiungi"),O={class:"bb-card"},R=y(" Elimina Abbonamento "),W=o("span",null,"Sei sicuro di voler eliminare questo abbonamento?",-1),X=y(" Elimina "),oe={__name:"Index",props:{models:Object},setup(v){I(()=>C().props.value.role);const{searchQuery:u,isSearching:D}=P("plan.index");function c(s){let a=`${s.duration_qty} `;switch(s.duration_type){case"month":s.duration_qty==1?a+="mese":a+="mesi";break;case"year":s.duration_qty==1?a+="anno":a+="anni";break}return a}const b=m(null),h=m(null),g=m(!1);function S(s,a){switch(s){case"edit":B.Inertia.visit(route("plan.edit",a.id));break;case"delete":h.value=a,b.value.open();break}}function w(){g.value=!0,B.Inertia.delete(route("plan.destroy",h.value.id),{onSuccess:s=>{b.value.close(),g.value=!1,j.flash(s.props.flash)}})}return(s,a)=>{const x=f("bb-button"),V=f("BbButton"),A=f("BbDialog");return r(),N(E,{title:"Abbonamenti"},{default:t(()=>[o("div",Q,[o("div",U,[i(L,{searching:_(D),modelValue:_(u),"onUpdate:modelValue":a[0]||(a[0]=e=>q(u)?u.value=e:null)},null,8,["searching","modelValue"])]),$,i(_(T),{href:s.route("plan.create")},{default:t(()=>[i(x,{type:"button"},{default:t(()=>[K]),_:1})]),_:1},8,["href"])]),o("div",O,[i(z,{collection:v.models.data,columns:[{key:"name",label:"Nome",classes:"font-bold"},{slot:"pricing_1",label:"Durata 1"},{slot:"pricing_2",label:"Durata 2"},{slot:"pricing_3",label:"Durata 3"},{slot:"pricing_4",label:"Durata 4"},{slot:"active",label:"Stato"}],links:v.models.links,actions:[{name:"edit",condition:e=>!0},{name:"delete",condition:e=>{var k;return!((k=e.pricings)!=null&&k.length)}}],onAction:a[1]||(a[1]=e=>S(e.action,e.item))},{pricing_1:t(({item:e})=>[e.pricings[0]?(r(),d("span",{key:0,class:l(e.pricings[0].active?"bb-badge-primary":"bb-badge-secondary")},n(c(e.pricings[0]))+" ("+n(e.pricings[0].price)+"\u20AC) ",3)):p("",!0)]),pricing_2:t(({item:e})=>[e.pricings[1]?(r(),d("span",{key:0,class:l(e.pricings[1].active?"bb-badge-primary":"bb-badge-secondary")},n(c(e.pricings[1]))+" ("+n(e.pricings[1].price)+"\u20AC) ",3)):p("",!0)]),pricing_3:t(({item:e})=>[e.pricings[2]?(r(),d("span",{key:0,class:l(e.pricings[2].active?"bb-badge-primary":"bb-badge-secondary")},n(c(e.pricings[2]))+" ("+n(e.pricings[2].price)+"\u20AC) ",3)):p("",!0)]),pricing_4:t(({item:e})=>[e.pricings[3]?(r(),d("span",{key:0,class:l(e.pricings[3].active?"bb-badge-primary":"bb-badge-secondary")},n(c(e.pricings[3]))+" ("+n(e.pricings[3].price)+"\u20AC) ",3)):p("",!0)]),active:t(({item:e})=>[o("span",{class:l(e.active?"bb-badge-success":"bb-badge-secondary")},n(e.active?"Attivo":"Non attivo"),3)]),_:1},8,["collection","links","actions"])]),i(A,{ref_key:"deleteDialog",ref:b,type:"plain",size:"sm"},{title:t(()=>[R]),buttons:t(()=>[i(V,{danger:"",disabled:g.value,onClick:w},{default:t(()=>[X]),_:1},8,["disabled"])]),default:t(()=>[W]),_:1},512)]),_:1})}}};export{oe as default};
