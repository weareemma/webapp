import{g as m,r as p,o as k,e as y,w as t,W as f,a as i,b as a,U as n,ag as A,a4 as C,L as N,S as r,X as l,Y as B,I as _}from"./app.c248d67c.js";import{_ as U}from"./AppLayout.4269b78a.js";import{B as j}from"./Table.94a0e2ae.js";import{B as E}from"./SearchInput.2608ef07.js";import{u as R}from"./search.181f2eee.js";import{r as z}from"./CheckCircleIcon.e349a6b1.js";import"./Logo.d971df1b.js";import"./wizardStore.2226bc2a.js";import"./menu.6da08311.js";import"./ChevronDownIcon.f3847a45.js";import"./CheckIcon.5f685430.js";import"./XIcon.0ce515ba.js";import"./PencilIcon.50f1eb3f.js";import"./RefreshIcon.6547917e.js";const L={class:"flex justify-between items-center mb-4"},O={class:"w-1/2"},P={class:"flex justify-start gap-2"},Q=r("Refresh Tanda"),W=r("Aggiungi"),X={class:"bb-card"},Y={class:"flex justify-start"},$=r(" Elimina utente "),q=i("span",null,"Una volta eliminato, non potrai pi\xF9 recuperare le informazioni.",-1),F=r(" Elimina "),re={__name:"Index",props:{users:Object},setup(b){m(()=>f().props.value.role);const h=m(()=>f().props.value.user),x=m(()=>f().props.value.is_admin),{searchQuery:u,isSearching:I}=R("user.index"),c=p(null),v=p(null),d=p(!1);function V(o,s){switch(o){case"impersonate":l.Inertia.get(route("impersonate",s.id));break;case"edit":l.Inertia.visit(route("user.edit",s.id));break;case"delete":v.value=s,c.value.open();break}}function w(){d.value=!0,l.Inertia.delete(route("user.destroy",v.value.id),{onSuccess:o=>{c.value.close(),d.value=!1,B.flash(o.props.flash)}})}function D(){l.Inertia.post(route("tanda.update.users"),{},{onSuccess:o=>{B.flash(o)}})}return(o,s)=>{const g=_("bb-button"),S=_("BbButton"),T=_("BbDialog");return k(),y(U,{title:"Utenti"},{default:t(()=>[i("div",L,[i("div",O,[a(E,{searching:n(I),modelValue:n(u),"onUpdate:modelValue":s[0]||(s[0]=e=>A(u)?u.value=e:null)},null,8,["searching","modelValue"])]),i("div",P,[a(g,{onClick:D},{default:t(()=>[Q]),_:1}),a(n(C),{href:o.route("user.create")},{default:t(()=>[a(g,{type:"button"},{default:t(()=>[W]),_:1})]),_:1},8,["href"])])]),i("div",X,[a(j,{collection:b.users.data,columns:[{key:"full_name",label:"Nome",classes:"font-bold"},{key:"email",label:"Email"},{key:"role",label:"Ruolo"},{key:"tanda_code",label:"Tanda"},{slot:"active",label:"Attivo"}],links:b.users.links,actions:[{name:"impersonate",condition:e=>e.id!==n(h).id&&n(x)},{name:"edit",condition:e=>!0},{name:"delete",condition:e=>e.id!==n(h).id}],onAction:s[1]||(s[1]=e=>V(e.action,e.item))},{active:t(({item:e})=>[i("div",Y,[e.active?(k(),y(n(z),{key:0,class:"w-4 h-4 text-green-400"})):N("",!0)])]),_:1},8,["collection","links","actions"])]),a(T,{ref_key:"deleteDialog",ref:c,type:"plain",size:"sm"},{title:t(()=>[$]),buttons:t(()=>[a(S,{danger:"",disabled:d.value,onClick:w},{default:t(()=>[F]),_:1},8,["disabled"])]),default:t(()=>[q]),_:1},512)]),_:1})}}};export{re as default};
