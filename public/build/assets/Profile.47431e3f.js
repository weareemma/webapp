import{a9 as j,r as v,o as w,e as B,w as d,a as s,b as o,aa as y,ab as V,ak as I,ae as g,U as t,c as D,au as F,L as z,S as c,Y as h,X as E,I as f}from"./app.45a2e0de.js";import{_ as T}from"./CustomerLayout.da8c9787.js";import{r as L}from"./PencilIcon.9b9a523e.js";import"./Logo.1cde1930.js";import"./Footer.edc70d2c.js";import"./XIcon.52e671f8.js";import"./disclosure.b237ce99.js";import"./menu.365b37e7.js";const M={class:"mx-auto w-full"},R=s("h3",{class:"text-xl text-bb-blue-500 font-extrabold mb-5 text-center"},"Dati account",-1),$={class:"bb-card py-8 px-10 shadow-xl"},A={class:"my-4"},O=c("Foto profilo"),X={class:"col-span-6 sm:col-span-4"},Y={class:"flex justify-start items-center gap-2"},q={class:"mt-2"},G=["src","alt"],H={class:"mt-2"},J=["onClick"],K=["onClick"],Q={class:"my-4"},W=c("Email"),Z={class:"my-4"},ee=c("Nome"),oe={class:"my-4"},te=c("Cognome"),se={class:"my-4"},le=c("Telefono"),ae={class:"my-4"},ne=c("Password"),re={class:"my-4"},de=c("Conferma password"),ie={class:"flex justify-end items-center mt-4"},ue=s("span",null,"Salva",-1),we={__name:"Profile",props:{user:Object},setup(_){const x=_,k={password:null,password_confirmation:null,photo:null},e=j({...x.user,...k}),p=v(null),i=v(null);function C(){i.value&&(e.photo=i.value.files[0]),e.post(route("customer.profile.update"),{preserveScroll:!0,onSuccess:n=>{h.flash(n.props.flash),b()}})}const P=()=>{i.value.click()},N=()=>{const n=i.value.files[0];if(h.lg(n.size),n.size>2e6){h.flash({type:"error",message:"Non puoi caricare un'immagine pi\xF9 grande di 2 MB"});return}if(!n)return;const l=new FileReader;l.onload=r=>{p.value=r.target.result},l.readAsDataURL(n)},S=()=>{E.Inertia.delete(route("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{p.value=null,b()}})},b=()=>{var n;(n=i.value)!=null&&n.value&&(i.value.value=null),e.reset("photo")};return(n,l)=>{const r=f("bb-label"),u=f("bb-input-validation"),m=f("bb-input"),U=f("bb-button");return w(),B(T,{title:"Dati account"},{default:d(()=>[s("div",M,[R,s("div",$,[s("div",A,[o(r,{class:"mb-1"},{default:d(()=>[O]),_:1}),s("div",X,[s("input",{ref_key:"photoInput",ref:i,type:"file",class:"hidden",accept:".jpg, .jpeg, .png",onChange:N},null,544),s("div",Y,[y(s("div",q,[s("img",{src:_.user.profile_photo_url,alt:_.user.name,class:"rounded-full h-20 w-20 object-cover"},null,8,G)],512),[[V,!p.value]]),y(s("div",H,[s("span",{class:"block rounded-full w-20 h-20 bg-cover bg-no-repeat bg-center",style:I("background-image: url('"+p.value+"');")},null,4)],512),[[V,p.value]]),s("button",{type:"button",class:"mt-2 icon-button",onClick:g(P,["prevent"])},[o(t(L))],8,J),_.user.profile_photo_path||t(e).photo?(w(),D("button",{key:0,type:"button",class:"mt-2 icon-button",onClick:g(S,["prevent"])},[o(t(F))],8,K)):z("",!0)]),o(u,{form:t(e),name:"photo"},null,8,["form"])])]),s("div",Q,[o(r,{class:"mb-1"},{default:d(()=>[W]),_:1}),o(m,{type:"email",placeholder:"Email",modelValue:t(e).email,"onUpdate:modelValue":l[0]||(l[0]=a=>t(e).email=a),disabled:"true"},null,8,["modelValue"]),o(u,{form:t(e),name:"email"},null,8,["form"])]),s("div",Z,[o(r,{class:"mb-1"},{default:d(()=>[ee]),_:1}),o(m,{type:"text",placeholder:"Nome",modelValue:t(e).name,"onUpdate:modelValue":l[1]||(l[1]=a=>t(e).name=a)},null,8,["modelValue"]),o(u,{form:t(e),name:"name"},null,8,["form"])]),s("div",oe,[o(r,{class:"mb-1"},{default:d(()=>[te]),_:1}),o(m,{type:"text",placeholder:"Cognome",modelValue:t(e).surname,"onUpdate:modelValue":l[2]||(l[2]=a=>t(e).surname=a)},null,8,["modelValue"]),o(u,{form:t(e),name:"surname"},null,8,["form"])]),s("div",se,[o(r,{class:"mb-1"},{default:d(()=>[le]),_:1}),o(m,{type:"text",placeholder:"Telefono",modelValue:t(e).phone,"onUpdate:modelValue":l[3]||(l[3]=a=>t(e).phone=a)},null,8,["modelValue"]),o(u,{form:t(e),name:"phone"},null,8,["form"])]),s("div",ae,[o(r,{class:"mb-1"},{default:d(()=>[ne]),_:1}),o(m,{type:"password",placeholder:"Password",modelValue:t(e).password,"onUpdate:modelValue":l[4]||(l[4]=a=>t(e).password=a)},null,8,["modelValue"]),o(u,{form:t(e),name:"password"},null,8,["form"])]),s("div",re,[o(r,{class:"mb-1"},{default:d(()=>[de]),_:1}),o(m,{type:"password",placeholder:"Conferma Password",modelValue:t(e).password_confirmation,"onUpdate:modelValue":l[5]||(l[5]=a=>t(e).password_confirmation=a)},null,8,["modelValue"]),o(u,{form:t(e),name:"password_confirmation"},null,8,["form"])]),s("div",ie,[o(U,{type:"button",onClick:C,disabled:t(e).processing},{default:d(()=>[ue]),_:1},8,["disabled"])])])])]),_:1})}}};export{we as default};
