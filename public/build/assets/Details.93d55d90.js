import{_ as it}from"./StylistLayout.8d0f81c6.js";import{y as rt,Y as u,a9 as ct,r as d,o as m,e as h,w as e,a as t,b as n,U as r,aL as ut,K as b,a8 as q,S as i,c as y,q as dt,J as mt,L as p,X as B,al as Q,I as _}from"./app.c248d67c.js";import bt from"./BookingStatusBadge.c141548e.js";import{_ as _t}from"./PhotoUploader.29c6691c.js";import{r as gt}from"./PencilIcon.50f1eb3f.js";import"./Logo.d971df1b.js";import"./wizardStore.2226bc2a.js";import"./XIcon.0ce515ba.js";import"./menu.6da08311.js";import"./disclosure.e9de6139.js";const pt={class:"mx-auto max-w-7xl sm:px-6 lg:px-8 sm:mt-10"},ft={class:"mx-auto max-w-3xl"},kt=i(" Torna indietro "),ht={class:"bb-card-stylist px-8 py-7 mt-5 bg-[#C6E4E7] text-bb-gray-800"},vt={class:"text-lg font-semibold"},xt={class:"flex justify-start gap-3 items-center mt-3 mb-5"},yt=["src"],Ct=["href"],Vt={class:"font-semibold underline"},Nt={class:"grid grid-cols-8 gap-x-2 gap-y-3 items-baseline"},St=t("p",{class:"text-sm text-bb-gray-700 col-span-2 sm:col-span-1"},"SERVIZI",-1),wt={class:"text-bb-gray-800 inline-block col-span-6 sm:col-span-7"},Et=t("p",{class:"text-sm text-bb-gray-700 col-span-2 sm:col-span-1"},"EXTRA",-1),zt={class:"text-bb-gray-800 col-span-6 sm:col-span-7 flex items-center gap-x-2"},Bt=t("p",{class:"text-sm text-bb-gray-700 col-span-2 sm:col-span-1"},"STATO",-1),Tt={class:"col-span-6 sm:col-span-7"},Dt=t("p",{class:"text-sm text-bb-gray-700 col-span-2 sm:col-span-1"},"STORE",-1),Mt={class:"text-bb-gray-800 col-span-6 sm:col-span-7"},$t={key:0},jt=t("div",{class:"relative"},[t("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[t("div",{class:"w-full border-t border-gray-300"})]),t("div",{class:"relative flex justify-center"},[t("span",{class:"bg-white px-2 text-sm text-gray-500 my-4"})])],-1),It={class:"flex justify-start items-center gap-4 flex-wrap"},At=["onClick","src"],Ut={class:"bb-card p-0 overflow-hidden bg-white"},Yt=["src"],Ft={class:"mt-4"},Ot=t("p",{class:"text-sm text-bb-gray-700 col-span-1"},"NOTE APPUNTAMENTO",-1),Lt={class:"flex items-start my-2"},Pt=i(" Salva "),Rt={key:1,class:"mt-4"},qt=t("p",{class:"text-sm text-bb-gray-700 col-span-1"},"NOTE CLIENTE",-1),Qt={class:"flex items-start my-2"},Xt=i(" Salva "),Jt={class:"text-bb-gray-600 m-0 text-xs col-span-7"},Kt={class:"flex justify-end mt-6 gap-2"},Zt=i("Non presentato"),Gt=i("Modifica"),Ht=i("Inizia servizio"),Wt=i("Termina servizio"),te=i("Modifica resoconto"),ee=i(" Inizia servizio "),oe=t("span",null,"Confermi che il servizio sta iniziando?",-1),se=i(" Annulla "),ne=i(" Conferma "),le=t("h3",{class:"text-bb-blue-500"},"Il servizio \xE8 terminato?",-1),ae=t("p",{class:"text-bb-gray-800"}," Confermi che il servizio \xE8 terminato? ",-1),ie=t("p",{class:"text-bb-gray-800"}," Carica una foto del risultato finale e inserisci eventuali note utili sul cliente e sul lavoro svolto. ",-1),re={class:"mt-5"},ce={class:"mb-4"},ue=i(" Foto "),de=i(" Carica una o pi\xF9 foto del risultato finale. "),me={class:"mb-4"},be=i(" Note sul cliente "),_e=i(" Queste note compariranno nelle info generali del cliente. "),ge=i("Note sull'appuntamento"),pe=i(" Annulla "),fe=i(" Conferma "),ke=t("h3",{class:"text-bb-blue-500"},"Aggiungi dei servizi extra",-1),he=i(" Annulla "),ve=i(" Salva "),De={__name:"Details",props:{booking:Object,services:Object},setup(l){var j,I,A;const c=l;rt(()=>{u.lg(c.services),S.value=c.booking.photos});const f=ct({booking_id:c.booking.id,stylist_notes:c.booking.stylist_notes,customer_notes:c.booking.customer.last_notes,uid:null}),C=d(null),v=d(null);function X(){f.post(route("stylist.booking.take"),{preserveScroll:!0,onSuccess:a=>{C.value.close(),u.flash(a.props.flash)}})}function J(){f.transform(a=>({...a,photos:T.value})).post(route("stylist.booking.end"),{forceFormData:!0,preserveScroll:!0,onSuccess:a=>{v.value.close(),S.value=c.booking.photos,u.flash(a.props.flash)}})}const K=d(null),S=d([]),T=d(null),D=d(null),M=d(null);function Z(a){M.value=a,D.value.open()}function G(){var a;B.Inertia.visit(route("stylist.booking.edit",(a=c.booking.parent_id)!=null?a:c.booking.id))}function $(){return c.booking.slots.filter(a=>a.service.extra)}function H(){return c.booking.slots.filter(a=>!a.service.extra)}const V=d(null),N=d(null),W=()=>{N.value=$().map(a=>a.service.id),V.value.open()},tt=()=>{B.Inertia.post(route("stylist.booking.addExtra",c.booking.id),{services:N.value},{onSuccess:a=>{V.value.close(),u.flash(a.props.flash)}})};function et(){B.Inertia.post(route("booking.notShown",c.booking.id),{onFinish:()=>{u.flash({type:"success",message:"Stato aggiornato"})}})}const w=d((I=(j=c.booking.customer)==null?void 0:j.last_notes)!=null?I:""),E=d((A=c.booking.stylist_notes)!=null?A:""),ot=()=>{Q.post(route("notes.customer",c.booking.customer.id),{notes:w.value}).then(()=>{u.flash({type:"success",message:"Note salvate"})})},st=()=>{Q.post(route("notes.booking",c.booking.id),{notes:E.value}).then(()=>{u.flash({type:"success",message:"Note salvate"})})};return(a,o)=>{const nt=_("bb-link"),g=_("bb-button"),lt=_("bb-modal"),U=_("BbTextarea"),k=_("BbButton"),z=_("BbDialog"),x=_("bb-label"),Y=_("bb-textarea"),at=_("bb-select");return m(),h(it,{title:"Appuntamento"},{default:e(()=>{var F,O,L,P,R;return[t("div",pt,[t("div",ft,[n(nt,{href:a.route("stylist.dashboard")},{default:e(()=>[n(r(ut),{class:"h-4"}),kt]),_:1},8,["href"]),t("div",ht,[t("p",null,b(r(q)(l.booking.date).format("dddd D MMMM YYYY")),1),t("p",vt,b(l.booking.hour_formatted),1),t("div",xt,[t("img",{class:"h-8 w-8 rounded-full object-cover",src:l.booking.customer.profile_photo_url.replace("3000",""),alt:""},null,8,yt),t("a",{href:a.route("stylist.customer.show",l.booking.customer.id)},[t("p",Vt,b(l.booking.customer.full_name),1)],8,Ct),t("p",null,b(l.booking.parent_id!==null?"Amica "+l.booking.guest:""),1)]),t("div",Nt,[St,t("p",wt,b(H().map(s=>s.service.title).join(" + ")),1),Et,t("p",zt,[i(b($().map(s=>s.service.title).join(" + "))+" ",1),n(g,{primary:"",class:"p-1",onClick:o[0]||(o[0]=s=>W())},{default:e(()=>[n(r(gt),{class:"w-3 h-3"})]),_:1})]),Bt,t("div",Tt,[n(bt,{status:l.booking.status,label:l.booking.status_formatted},null,8,["status","label"])]),Dt,t("p",Mt,b(l.booking.store.name),1)]),l.booking.status===r(u).booking_status_ended?(m(),y("div",$t,[jt,t("div",It,[(m(!0),y(dt,null,mt(l.booking.photos,s=>(m(),y("div",null,[s.id>0?(m(),y("img",{onClick:xe=>Z(s.original.replace("3000","")),key:s.id,class:"inline-block h-20 w-20 rounded-md object-cover cursor-pointer",src:s.url.replace("3000",""),alt:""},null,8,At)):p("",!0)]))),256))]),n(lt,{ref_key:"photoModal",ref:D,size:"md",withClose:!0},{default:e(()=>[t("div",Ut,[t("img",{class:"object-cover",src:M.value},null,8,Yt)])]),_:1},512)])):p("",!0),t("div",Ft,[Ot,t("div",Lt,[n(U,{modelValue:E.value,"onUpdate:modelValue":o[1]||(o[1]=s=>E.value=s),class:"text-sm"},null,8,["modelValue"]),n(g,{primary:"",class:"py-1 px-2 ml-2 text-xs",onClick:st},{default:e(()=>[Pt]),_:1})])]),l.booking.is_father?(m(),y("div",Rt,[qt,t("div",Qt,[n(U,{modelValue:w.value,"onUpdate:modelValue":o[2]||(o[2]=s=>w.value=s),class:"text-sm"},null,8,["modelValue"]),n(g,{primary:"",class:"py-1 px-2 ml-2 text-xs",onClick:ot},{default:e(()=>[Xt]),_:1})]),t("p",Jt," Scritte da "+b((O=(F=l.booking.customer)==null?void 0:F.last_notes_by)==null?void 0:O.name)+" "+b((P=(L=l.booking.customer)==null?void 0:L.last_notes_by)==null?void 0:P.surname)+" il "+b(r(q)((R=l.booking.customer)==null?void 0:R.last_notes_updated_at).format("DD/MM/YYYY")),1)])):p("",!0),t("div",Kt,[l.booking.status===r(u).booking_status_not_executed?(m(),h(g,{key:0,primary:"",light:"",onClick:et},{default:e(()=>[Zt]),_:1})):p("",!0),!l.booking.multiple&&l.booking.status!==r(u).booking_status_ended&&l.booking.status!==r(u).booking_status_not_shown?(m(),h(g,{key:1,primary:"",light:"",onClick:G},{default:e(()=>[Gt]),_:1})):p("",!0),l.booking.status===r(u).booking_status_todo||l.booking.status===r(u).booking_status_not_executed?(m(),h(g,{key:2,primary:"",onClick:o[3]||(o[3]=s=>C.value.open())},{default:e(()=>[Ht]),_:1})):p("",!0),l.booking.status===r(u).booking_status_progress?(m(),h(g,{key:3,primary:"",onClick:o[4]||(o[4]=s=>v.value.open())},{default:e(()=>[Wt]),_:1})):p("",!0),l.booking.status===r(u).booking_status_ended||l.booking.status===r(u).booking_status_not_shown?(m(),h(g,{key:4,primary:"",light:"",onClick:o[5]||(o[5]=s=>v.value.open())},{default:e(()=>[te]),_:1})):p("",!0)])]),n(z,{ref_key:"confirmDialog",ref:C,type:"plain",size:"sm","no-cancel":!0},{title:e(()=>[ee]),buttons:e(()=>[n(k,{secondary:"",light:"",onClick:o[6]||(o[6]=s=>C.value.close())},{default:e(()=>[se]),_:1}),n(k,{primary:"",onClick:X},{default:e(()=>[ne]),_:1})]),default:e(()=>[oe]),_:1},512),n(z,{ref_key:"endDialog",ref:v,type:"plain",size:"md","no-cancel":!0},{title:e(()=>[le]),buttons:e(()=>[n(k,{secondary:"",light:"",onClick:o[10]||(o[10]=s=>v.value.close())},{default:e(()=>[pe]),_:1}),n(k,{primary:"",onClick:J},{default:e(()=>[fe]),_:1})]),default:e(()=>[ae,ie,t("div",re,[t("div",ce,[n(x,{class:"mb-0 text-bb-gray-800"},{default:e(()=>[ue]),_:1}),n(x,{class:"mb-1 text-sm text-bb-gray-600"},{default:e(()=>[de]),_:1}),n(_t,{ref_key:"photosUploader",ref:K,photos:S.value,onChanged:o[7]||(o[7]=s=>T.value=s)},null,8,["photos"])]),t("div",me,[n(x,{class:"mb-0 text-bb-gray-800"},{default:e(()=>[be]),_:1}),n(x,{class:"mb-1 text-sm text-bb-gray-600"},{default:e(()=>[_e]),_:1}),n(Y,{class:"min-h-[180px]",type:"text",placeholder:"Come sono i capelli del cliente? Qualche peculiarit\xE0? Vuoi dare qualche consiglio su come trattarli al meglio?",modelValue:r(f).customer_notes,"onUpdate:modelValue":o[8]||(o[8]=s=>r(f).customer_notes=s)},null,8,["modelValue"])]),t("div",null,[n(x,{class:"mb-1"},{default:e(()=>[ge]),_:1}),n(Y,{class:"min-h-[180px]",type:"text",placeholder:"Come \xE8 andato l\u2019appuntamento? Tutti i trattamenti richiesti sono stati completati come da procedura? Il cliente \xE8 sembrato soddisfatto?",modelValue:r(f).stylist_notes,"onUpdate:modelValue":o[9]||(o[9]=s=>r(f).stylist_notes=s)},null,8,["modelValue"])])])]),_:1},512),n(z,{ref_key:"extraDialog",ref:V,type:"plain",size:"md","no-cancel":!0},{title:e(()=>[ke]),buttons:e(()=>[n(k,{secondary:"",light:"",onClick:o[12]||(o[12]=s=>V.value.close())},{default:e(()=>[he]),_:1}),n(k,{primary:"",onClick:o[13]||(o[13]=s=>tt())},{default:e(()=>[ve]),_:1})]),default:e(()=>[n(at,{mode:"tags",placeholder:"Seleziona uno o pi\xF9 servizi","close-on-select":!1,options:l.services,modelValue:N.value,"onUpdate:modelValue":o[11]||(o[11]=s=>N.value=s)},null,8,["options","modelValue"])]),_:1},512)])])]}),_:1})}}};export{De as default};
