import{a9 as j,B as T,g as O,y as w,o as r,e as C,w as n,aq as N,a as m,b as l,U as o,c as u,L as _,Q as B,S as i,Y as h,I as c}from"./app.c248d67c.js";import{_ as F}from"./AppLayout.4269b78a.js";import"./Logo.d971df1b.js";import"./wizardStore.2226bc2a.js";import"./menu.6da08311.js";import"./ChevronDownIcon.f3847a45.js";import"./CheckIcon.5f685430.js";import"./XIcon.0ce515ba.js";const A={class:"flex justify-start items-center mt-4 mb-6"},I={class:"bb-card p-8"},P={class:"text-bb-blue-500 mb-4 big-header-title"},L={key:0},q={key:1},D={class:"grid grid-cols-1 sm:grid-cols-2 gap-x-5 gap-y-4"},E=i("Codice"),Q=i("Tipologia checkout"),Y={class:"col-span-2"},$=i("Tipo"),G={class:"col-span-2"},H=i("Tipologia offerta"),J={key:0},K=i("Cosa"),R={key:1},W={key:0},X=i("Servizi"),Z={key:1},ee=i("Livello servizi"),oe={key:2},le=i("Tipologia di add-on"),te={key:2},se=i("Percentuale"),ne={key:3},ae=i("Importo"),de=i("Spesa minima"),ie=i("Valido dal"),me=i("Valido al"),re=i("N. massimo di utilizzi"),ue=i("Store"),ce={class:"col-span-2"},pe=i("Valido per"),_e={key:4,class:"col-span-2"},ye=i("Utenti"),fe={class:"col-span-2"},be=i("Descrizione"),ve={class:"sm:col-span-2 flex justify-start items-center"},ge=i("Sconto attivo"),Ve={class:"flex justify-end items-center mt-4"},he={key:0},ke={key:1},we={__name:"Form",props:{model:Object,stores:Object,users:Object,service_typologies:Object,services:Object,typologies:Object,valid_for:Object,service_levels:Object,service_types:Object,types:Object},setup(p){const g=p,e=j(g.model);T(()=>e.type,(b,t)=>{b==="general"&&e.typology==="free"&&(e.typology="percentage")});const k=O(()=>N.orderBy(g.users,["label"]));w(()=>{});function S(){e.id?e.put(route("discount.update",e.id),{preserveScroll:!0,onSuccess:b=>{h.flash({type:"success",message:"Sconto modificato"})}}):e.post(route("discount.store"),{preserveScroll:!0,onSuccess:b=>{h.flash({type:"success",message:"Sconto creato"})}})}return(b,t)=>{const U=c("bb-back-link"),a=c("bb-label"),f=c("bb-input"),d=c("bb-input-validation"),v=c("bb-radio-group"),y=c("bb-select"),V=c("datepicker"),x=c("bb-textarea"),z=c("bb-switch"),M=c("bb-button");return r(),C(F,{title:"Sconto","show-title":!1},{default:n(()=>[m("div",A,[l(U)]),m("div",I,[m("h1",P,[o(e).id?(r(),u("span",L,"Modifica sconto")):(r(),u("span",q,"Aggiungi nuovo sconto"))]),m("div",D,[m("div",null,[l(a,{class:"mb-1"},{default:n(()=>[E]),_:1}),l(f,{type:"text",placeholder:"Codice",modelValue:o(e).code,"onUpdate:modelValue":t[0]||(t[0]=s=>o(e).code=s)},null,8,["modelValue"]),l(d,{form:o(e),name:"code"},null,8,["form"])]),m("div",null,[l(a,{class:"mb-1"},{default:n(()=>[Q]),_:1}),l(v,{class:"py-2",modelValue:o(e).checkout_type,"onUpdate:modelValue":t[1]||(t[1]=s=>o(e).checkout_type=s),options:[{value:"appointment",label:"Appuntamento"}]},null,8,["modelValue"]),l(d,{form:o(e),name:"checkout_type"},null,8,["form"])]),m("div",Y,[l(a,{class:"mb-1"},{default:n(()=>[$]),_:1}),l(v,{class:"py-2",modelValue:o(e).type,"onUpdate:modelValue":t[2]||(t[2]=s=>o(e).type=s),options:p.types},null,8,["modelValue","options"]),l(d,{form:o(e),name:"type"},null,8,["form"])]),m("div",G,[l(a,{class:"mb-1"},{default:n(()=>[H]),_:1}),l(v,{class:"py-2",modelValue:o(e).typology,"onUpdate:modelValue":t[3]||(t[3]=s=>o(e).typology=s),options:p.typologies.filter(s=>o(e).type==="service"||s.value!=="free")},null,8,["modelValue","options"]),l(d,{form:o(e),name:"typology"},null,8,["form"])]),o(e).type==="service"?(r(),u("div",J,[l(a,{class:"mb-1"},{default:n(()=>[K]),_:1}),l(y,{mode:"single",placeholder:"Seleziona un'opzione","close-on-select":!0,options:p.service_typologies,modelValue:o(e).service_typology,"onUpdate:modelValue":t[4]||(t[4]=s=>o(e).service_typology=s)},null,8,["options","modelValue"]),l(d,{form:o(e),name:"service_typology"},null,8,["form"])])):_("",!0),o(e).type==="service"?(r(),u("div",R,[o(e).service_typology==="service"?(r(),u("div",W,[l(a,{class:"mb-1"},{default:n(()=>[X]),_:1}),l(y,{mode:"tags",placeholder:"Seleziona uno o pi\xF9 servizi","close-on-select":!0,options:p.services,modelValue:o(e).services,"onUpdate:modelValue":t[5]||(t[5]=s=>o(e).services=s)},null,8,["options","modelValue"]),l(d,{form:o(e),name:"services"},null,8,["form"])])):_("",!0),o(e).service_typology==="service_level"?(r(),u("div",Z,[l(a,{class:"mb-1"},{default:n(()=>[ee]),_:1}),l(y,{mode:"single",placeholder:"Seleziona un livello","close-on-select":!0,options:p.service_levels,modelValue:o(e).service_level,"onUpdate:modelValue":t[6]||(t[6]=s=>o(e).service_level=s)},null,8,["options","modelValue"]),l(d,{form:o(e),name:"service_level"},null,8,["form"])])):_("",!0),o(e).service_typology==="add_on"?(r(),u("div",oe,[l(a,{class:"mb-1"},{default:n(()=>[le]),_:1}),l(y,{mode:"single",placeholder:"Seleziona un add-on","close-on-select":!0,options:p.service_types,modelValue:o(e).addon_typology,"onUpdate:modelValue":t[7]||(t[7]=s=>o(e).addon_typology=s)},null,8,["options","modelValue"]),l(d,{form:o(e),name:"addon_typology"},null,8,["form"])])):_("",!0)])):_("",!0),o(e).typology==="percentage"?(r(),u("div",te,[l(a,{class:"mb-1"},{default:n(()=>[se]),_:1}),l(f,{type:"number",placeholder:"%",modelValue:o(e).percentage,"onUpdate:modelValue":t[8]||(t[8]=s=>o(e).percentage=s)},null,8,["modelValue"]),l(d,{form:o(e),name:"percentage"},null,8,["form"])])):_("",!0),o(e).typology==="fixed"?(r(),u("div",ne,[l(a,{class:"mb-1"},{default:n(()=>[ae]),_:1}),l(f,{type:"number",placeholder:"\u20AC",modelValue:o(e).value,"onUpdate:modelValue":t[9]||(t[9]=s=>o(e).value=s)},null,8,["modelValue"]),l(d,{form:o(e),name:"value"},null,8,["form"])])):_("",!0),m("div",{class:B(o(e).typology==="free"?"col-span-2":"col-span-1")},[l(a,{class:"mb-1"},{default:n(()=>[de]),_:1}),l(f,{type:"number",placeholder:"Spesa minima",modelValue:o(e).minimum_charge,"onUpdate:modelValue":t[10]||(t[10]=s=>o(e).minimum_charge=s)},null,8,["modelValue"]),l(d,{form:o(e),name:"minimum_charge"},null,8,["form"])],2),m("div",null,[l(a,{class:"mb-1"},{default:n(()=>[ie]),_:1}),l(V,{modelValue:o(e).valid_from,"onUpdate:modelValue":t[11]||(t[11]=s=>o(e).valid_from=s),format:"dd/MM/yyyy",previewFormat:"dd/MM/yyyy",locale:"it-IT",modelType:"dd/MM/yyyy",enableTimePicker:!1,monthNameFormat:"long",autoApply:""},null,8,["modelValue"]),l(d,{form:o(e),name:"valid_from"},null,8,["form"])]),m("div",null,[l(a,{class:"mb-1"},{default:n(()=>[me]),_:1}),l(V,{modelValue:o(e).valid_to,"onUpdate:modelValue":t[12]||(t[12]=s=>o(e).valid_to=s),format:"dd/MM/yyyy",previewFormat:"dd/MM/yyyy",locale:"it-IT",modelType:"dd/MM/yyyy",enableTimePicker:!1,monthNameFormat:"long",autoApply:""},null,8,["modelValue"]),l(d,{form:o(e),name:"valid_to"},null,8,["form"])]),m("div",null,[l(a,{class:"mb-1"},{default:n(()=>[re]),_:1}),l(f,{type:"number",placeholder:"N. massimo di utilizzi",modelValue:o(e).maximum_count_per_user,"onUpdate:modelValue":t[13]||(t[13]=s=>o(e).maximum_count_per_user=s)},null,8,["modelValue"]),l(d,{form:o(e),name:"maximum_count_per_user"},null,8,["form"])]),m("div",null,[l(a,{class:"mb-1"},{default:n(()=>[ue]),_:1}),l(y,{mode:"tags",placeholder:"Seleziona gli store","close-on-select":!0,options:p.stores,modelValue:o(e).stores,"onUpdate:modelValue":t[14]||(t[14]=s=>o(e).stores=s)},null,8,["options","modelValue"]),l(d,{form:o(e),name:"stores"},null,8,["form"])]),m("div",ce,[l(a,{class:"mb-1"},{default:n(()=>[pe]),_:1}),l(v,{class:"py-2",modelValue:o(e).target,"onUpdate:modelValue":t[15]||(t[15]=s=>o(e).target=s),options:p.valid_for},null,8,["modelValue","options"]),l(d,{form:o(e),name:"target"},null,8,["form"])]),o(e).target==="users"?(r(),u("div",_e,[l(a,{class:"mb-1"},{default:n(()=>[ye]),_:1}),l(y,{mode:"tags",placeholder:"Seleziona gli utenti","close-on-select":!0,options:o(k),searchable:!0,modelValue:o(e).users,"onUpdate:modelValue":t[16]||(t[16]=s=>o(e).users=s)},null,8,["options","modelValue"]),l(d,{form:o(e),name:"users"},null,8,["form"])])):_("",!0),m("div",fe,[l(a,{class:"mb-1"},{default:n(()=>[be]),_:1}),l(x,{class:"min-h-[180px]",type:"text",modelValue:o(e).description,"onUpdate:modelValue":t[17]||(t[17]=s=>o(e).description=s)},null,8,["modelValue"]),l(d,{form:o(e),name:"description"},null,8,["form"])]),m("div",ve,[l(z,{modelValue:o(e).active,"onUpdate:modelValue":t[18]||(t[18]=s=>o(e).active=s)},null,8,["modelValue"]),l(a,{class:"mb-0 ml-2"},{default:n(()=>[ge]),_:1})]),l(d,{form:o(e),name:"active"},null,8,["form"])]),m("div",Ve,[l(M,{type:"button",onClick:S,disabled:o(e).processing},{default:n(()=>[o(e).id?(r(),u("span",he,"Salva")):(r(),u("span",ke,"Aggiungi"))]),_:1},8,["disabled"])])])]),_:1})}}};export{we as default};
