import{g as S,r as c,o as w,e as x,w as n,W as F,a as s,b as a,U as o,ag as I,a4 as A,Q as z,L as j,S as i,X as d,Y as D,I as u}from"./app.45a2e0de.js";import{_ as U}from"./AppLayout.f8630d45.js";import{r as E,B as L}from"./Table.e80badd5.js";import{B as O}from"./SearchInput.29274ae3.js";import{u as P}from"./search.6869db3c.js";import{r as $}from"./CheckCircleIcon.b6e74efe.js";import"./Logo.1cde1930.js";import"./wizardStore.ef397de9.js";import"./menu.365b37e7.js";import"./ChevronDownIcon.ec8df155.js";import"./CheckIcon.b71d4ea3.js";import"./XIcon.52e671f8.js";import"./PencilIcon.9b9a523e.js";import"./RefreshIcon.76168562.js";const Q={class:"flex justify-between items-center mb-4"},R={class:"w-1/2"},W={class:"flex justify-end gap-x-3"},X=["href"],Y=i("Aggiungi"),Z=s("svg",{width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M10 5C14.9706 5 19 4.10457 19 3C19 1.89543 14.9706 1 10 1C5.02944 1 1 1.89543 1 3C1 4.10457 5.02944 5 10 5Z","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),s("path",{d:"M1 3C1 5.23 4.871 9.674 6.856 11.805C7.58416 12.5769 7.99291 13.5959 8 14.657V20L12 18V14.657C12 13.596 12.421 12.582 13.144 11.805C15.13 9.674 19 5.231 19 3","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),q=[Z],G=s("h3",{class:"text-bb-blue-500 font-bold mb-2"},"Filtri",-1),H={class:"flex justify-start items-center gap-4 flex-wrap"},J={class:"min-w-[225px]"},K=i("Abbonato"),ee={class:"min-w-[225px]"},te=i("Nome abbonamento"),oe=i("Da"),se=i("A"),ae={class:"bb-card"},ne={class:"flex justify-start"},le=i(" Elimina utente "),ie=s("span",null," Una volta eliminato, non potrai pi\xF9 recuperare le informazioni. ",-1),re=i(" Elimina "),xe={__name:"Index",props:{customers:Object,plans:Object},setup(b){const V=S(()=>F().props.value.is_admin),{searchQuery:p,isSearching:C,filters:l}=P("customer.index",{subStatus:route().params.subStatus,subName:route().params.subName,subFrom:route().params.subFrom,subTo:route().params.subTo}),_=c(!1),f=c(null),h=c(null),y=c(!1);function T(r,e){switch(r){case"wizard":d.Inertia.get(route("booking.admin-dashboard",{customer_id:e.id}));break;case"impersonate":d.Inertia.get(route("impersonate",e.id));break;case"edit":d.Inertia.visit(route("customer.edit",e.id));break;case"view":d.Inertia.visit(route("customer.show",e.id));break;case"delete":h.value=e,f.value.open();break}}function N(){y.value=!0,d.Inertia.delete(route("customer.destroy",h.value.id),{onSuccess:r=>{f.value.close(),y.value=!1,D.flash(r.props.flash)}})}return(r,e)=>{const v=u("bb-button"),m=u("bb-label"),g=u("bb-select"),k=u("datepicker"),B=u("BbButton"),M=u("BbDialog");return w(),x(U,{title:"Clienti"},{default:n(()=>[s("div",Q,[s("div",R,[a(O,{searching:o(C),modelValue:o(p),"onUpdate:modelValue":e[0]||(e[0]=t=>I(p)?p.value=t:null)},null,8,["searching","modelValue"])]),s("div",W,[s("a",{href:r.route("user.export",{subStatus:o(l).subStatus,subName:o(l).subName,subFrom:o(l).subFrom,subTo:o(l).subTo})},[a(v,{type:"button"},{default:n(()=>[a(o(E),{class:"w-6 h-6"})]),_:1})],8,X),a(o(A),{href:r.route("customer.create")},{default:n(()=>[a(v,{type:"button"},{default:n(()=>[Y]),_:1})]),_:1},8,["href"]),s("button",{class:"bb-button-style-filter",type:"button",onClick:e[1]||(e[1]=t=>_.value=!_.value)},q)])]),s("div",{class:z("bb-card mb-3 px-7 py-5 "+(_.value?"block":"hidden"))},[G,s("div",H,[s("div",J,[a(m,{class:"text-sm mb-1"},{default:n(()=>[K]),_:1}),a(g,{mode:"single",class:"w-full",placeholder:"Seleziona un'opzione","close-on-select":!0,options:{subscribed:"Abbonato",unsubscribed:"Non abbonato"},modelValue:o(l).subStatus,"onUpdate:modelValue":e[2]||(e[2]=t=>o(l).subStatus=t)},null,8,["modelValue"])]),s("div",ee,[a(m,{class:"text-sm mb-1"},{default:n(()=>[te]),_:1}),a(g,{mode:"single",class:"w-full",placeholder:"Seleziona un'opzione","close-on-select":!0,options:b.plans,modelValue:o(l).subName,"onUpdate:modelValue":e[3]||(e[3]=t=>o(l).subName=t)},null,8,["options","modelValue"])]),s("div",null,[a(m,{class:"text-sm mb-1"},{default:n(()=>[oe]),_:1}),a(k,{modelValue:o(l).subFrom,"onUpdate:modelValue":e[4]||(e[4]=t=>o(l).subFrom=t),format:"dd/MM/yyyy",previewFormat:"dd/MM/yyyy",locale:"it-IT",modelType:"dd/MM/yyyy",enableTimePicker:!1,monthNameFormat:"long",autoApply:""},null,8,["modelValue"])]),s("div",null,[a(m,{class:"text-sm mb-1"},{default:n(()=>[se]),_:1}),a(k,{modelValue:o(l).subTo,"onUpdate:modelValue":e[5]||(e[5]=t=>o(l).subTo=t),format:"dd/MM/yyyy",previewFormat:"dd/MM/yyyy",locale:"it-IT",modelType:"dd/MM/yyyy",enableTimePicker:!1,monthNameFormat:"long",autoApply:""},null,8,["modelValue"])])])],2),s("div",ae,[a(L,{collection:b.customers.data,columns:[{key:"name",label:"Nome"},{key:"surname",label:"Cognome"},{key:"email",label:"Email"},{slot:"active",label:"Attivo"}],links:b.customers.links,actions:[{name:"wizard",condition:t=>!0},{name:"impersonate",condition:t=>o(V)},{name:"edit",condition:t=>!0},{name:"view",condition:t=>!0},{name:"delete",condition:t=>!1}],onAction:e[6]||(e[6]=t=>T(t.action,t.item))},{active:n(({item:t})=>[s("div",ne,[t.active?(w(),x(o($),{key:0,class:"w-4 h-4 text-green-400"})):j("",!0)])]),_:1},8,["collection","links","actions"])]),a(M,{ref_key:"deleteDialog",ref:f,type:"plain",size:"sm"},{title:n(()=>[le]),buttons:n(()=>[a(B,{danger:"",disabled:y.value,onClick:N},{default:n(()=>[re]),_:1},8,["disabled"])]),default:n(()=>[ie]),_:1},512)]),_:1})}}};export{xe as default};
