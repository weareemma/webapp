import{r as l,y as D,o as T,c as P,a as p,a5 as A,b as s,w as u,U as n,q as M,Y as g,a8 as N,X as F,I as h,S as y,K as $}from"./app.c248d67c.js";import{m as I,a as L,b as j,c as E,F as O}from"./main.fb97573b.js";import V from"./ScheduleActualEventModal.252c35a7.js";import{r as q}from"./XIcon.0ce515ba.js";import"./ScheduleAppointmentStatusBadge.3b648ebd.js";const B={class:"grid grid-cols-2 sm:flex items-center justify-between mb-4 flex-wrap gap-2"},U={class:"grid grid-cols-2 sm:flex items-center gap-2 w-full sm:w-auto col-span-2"},H=y("Refresh Tanda"),K={class:"bg-white rounded-xl overflow-hidden"},Q={__name:"ScheduleActualCalendar",setup(R,{expose:_}){const v=l(null),f=l(null),r=l(!1),o=l(null),i=l(null);D(()=>{f.value=v.value.getApi()});const d=l(!1);function k(){d.value=!0,axios.post(route("tanda.update.shifts")).then(e=>{g.flash({type:"success",message:"Aggiornamento turni in corso"})}),setTimeout(()=>{d.value=!1},5e3)}function b(e){f.value.gotoDate(e)}function w(e,t){console.log(e,t),o.value=e.event.toPlainObject(),o.value.extendedProps&&i.value.open()}function S(e){var t;if(o.value=e.event.toPlainObject(),o.value.extendedProps){let a=o.value.extendedProps.linked?`
APPUNTAMENTO MULTIPLO 

Sei sicuro di voler modificare questo l'appuntamento?`:`
Sei sicuro di voler modificare questo l'appuntamento?`;window.confirm(a)?C(o.value.extendedProps.booking.id,(t=e.newResource)==null?void 0:t.id,N(e.event.startStr).format("HH:mm:ss")):e.revert()}}function x(e,t){return!0}function C(e,t,a){F.Inertia.post(route("booking.update.calendar",e),{stylist_id:t,start:a},{onSuccess:c=>{g.flash(c.props.flash)}})}return _({goToDay:b}),(e,t)=>{const a=h("bb-button"),c=h("bb-modal");return T(),P(M,null,[p("div",B,[A(e.$slots,"title"),p("div",U,[s(a,{class:"px-1 sm:px-6",disabled:d.value,onClick:k},{default:u(()=>[H]),_:1},8,["disabled"]),s(a,{onClick:t[0]||(t[0]=()=>{r.value=!r.value})},{default:u(()=>[y($(r.value?"Slot 30":"Slot 5"),1)]),_:1})])]),p("div",K,[s(n(O),{ref_key:"calendar",ref:v,options:{schedulerLicenseKey:"CC-Attribution-NonCommercial-NoDerivatives",plugins:[n(I),n(L),n(j),n(E)],locale:"it",initialView:"resourceTimeGridDay",stickyFooterScrollbar:!0,headerToolbar:{start:"prev,next,title",center:"",end:"today"},titleFormat:{year:"numeric",month:"long",day:"numeric",weekday:"long"},slotLabelInterval:r.value?"00:05:00":"00:30:00",slotLabelFormat:{hour:"numeric",minute:"2-digit",omitZeroMinute:!1,meridian:"short"},allDaySlot:!1,selectable:!1,editable:!0,droppable:!0,firstDay:1,slotDuration:r.value?"00:05:00":"00:30:00",slotMinTime:"07:00:00",slotMaxTime:"23:00:00",eventAllow:x,resources:{url:e.route("schedule.actual.resources")},eventClick:w,eventDrop:S,eventDurationEditable:!1,eventSources:[{url:e.route("schedule.actual.events")},{url:e.route("schedule.actual.bookings"),borderColor:"red"}]}},null,8,["options"]),s(c,{ref_key:"eventModal",ref:i,size:"md","with-close":!0},{close:u(({close:m})=>[s(n(q),{class:"absolute top-14 right-5 w-5 h-5 text-bb-gray-800 cursor-pointer",onClick:z=>m()},null,8,["onClick"])]),default:u(()=>[s(V,{event:o.value,booking:o.value.extendedProps.booking,onDateChanged:t[1]||(t[1]=m=>{b(m),i.value.close()}),onDeleted:t[2]||(t[2]=()=>{i.value.close()})},null,8,["event","booking"])]),_:1},512)])],64)}}};export{Q as default};
