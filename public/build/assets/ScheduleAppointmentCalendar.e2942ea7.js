import{r as l,W as E,y as T,o as D,c as H,a as N,b as c,U as u,w as _,q as j,a8 as F,Y as o,I as $}from"./app.45a2e0de.js";import A from"./ScheduleAppointmentEventModal.2889c64c.js";import{c as V,b as S,F as z}from"./main.f7cfe0fe.js";import{r as Z}from"./XIcon.52e671f8.js";import"./ScheduleAppointmentStatusBadge.d0c04c36.js";import"./BookingPaymentDialog.c21dfd47.js";const I={class:"bg-white rounded-xl overflow-hidden"},Y={__name:"ScheduleAppointmentCalendar",emits:["changed"],setup(O,{expose:k,emit:C}){l(E().props.value.role);const x="schedule.appointment.resources",w="schedule.appointment.events",b=l(null),i=l(null),r=l(!1);T(()=>{i.value=b.value.getApi()});function y(e){const t=F(e.date);return`${t.format("H:mm")} - ${t.add(r.value?5:30,"minutes").format("H:mm")}`}function L(e){if(e.event.display=="background")return{domNodes:[document.createElement("div")]};const t=document.createElement("div"),n=document.createElement("div"),d=document.createElement("div"),m=document.createElement("div"),p=document.createElement("small"),a=document.createElement("div"),h=[t,d,p,a];t.classList.add("bb-fc-event__title-container"),t.appendChild(n),t.appendChild(m),n.classList.add("bb-fc-event__title"),n.classList.add("flex","justify-between","items-center","gap-x-0.5");let s="";if(e.event.extendedProps.booking.status===o.booking_status_todo&&(s="bg-bb-gray-100"),e.event.extendedProps.booking.status===o.booking_status_progress&&(s="bg-[#A2E8EF]"),e.event.extendedProps.booking.status===o.booking_status_ended&&(s="bg-bb-green-500"),e.event.extendedProps.booking.status===o.booking_status_canceled&&(s="bg-bb-danger"),e.event.extendedProps.booking.status===o.booking_status_not_executed&&(s="bg-bb-gray-100"),e.event.extendedProps.booking.status===o.booking_status_not_shown&&(s="bg-bb-primary-800"),n.innerHTML="<h5>"+o.previewText(e.event.title,14)+" "+(e.event.extendedProps.booking.guest>0?e.event.extendedProps.booking.guest:"")+"</h5>",e.event.extendedProps.booking.stylist||(n.innerHTML+=`<div class="grow flex justify-end items-center"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 text-yellow-300 inline-block"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"/></svg></div> 
`),n.innerHTML+='<span class="inline-block w-3 h-3 rounded-full '+s+'"></span>',m.classList.add("bb-fc-event__status",`bb-fc-event__status--${e.event.extendedProps.booking.status}`),d.innerHTML="<p>"+e.event.extendedProps.booking.hour_formatted+"</p>",p.classList.add("bb-fc-event__services"),p.innerHTML=e.event.extendedProps.services,a.classList.add("absolute"),a.classList.add("bottom-0"),a.classList.add("inset-x-0"),e.event.extendedProps.booking.stylist&&(a.innerHTML=`<p class="mb-1 flex justify-start gap-1 align-baseline text-[#2B3B77]"><svg class="self-center" width="11" height="11" viewBox="0 0 11 11" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_879_22680)">
<path d="M2.51953 2.32425C2.51953 2.30614 2.53305 2.29079 2.55093 2.2885L7.35082 1.66929C8.55624 1.51345 9.6237 2.45235 9.6237 3.66762C9.6237 4.88289 8.55601 5.82156 7.35082 5.66595L2.55093 5.04675C2.54224 5.04563 2.53426 5.04138 2.52848 5.0348C2.5227 5.02822 2.51952 5.01976 2.51953 5.011V2.32425Z" stroke="#2B3B77"/>
<path d="M2.52018 2.29167L0.916016 1.375V5.95833L2.52018 5.04167" stroke="#2B3B77" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M8.707 5.27148L7.17296 8.91478C7.08423 9.12545 6.93531 9.30528 6.74486 9.43172C6.55442 9.55817 6.3309 9.62563 6.1023 9.62565C5.27157 9.62565 4.70942 8.77888 5.03163 8.01323L6.18617 5.27148" stroke="#2B3B77"/>
<path d="M8.01953 5.72852C9.15862 5.72852 10.082 4.8051 10.082 3.66602C10.082 2.52693 9.15862 1.60352 8.01953 1.60352C6.88044 1.60352 5.95703 2.52693 5.95703 3.66602C5.95703 4.8051 6.88044 5.72852 8.01953 5.72852Z" stroke="#2B3B77"/>
</g>
<defs>
<clipPath id="clip0_879_22680">
<rect width="11" height="11" fill="white"/>
</clipPath>
</defs>
</svg>
`+e.event.extendedProps.booking.stylist.full_name+"</p>"),e.event.extendedProps.toPay){const g=document.createElement("div");g.classList.add("bb-fc-event__to-pay"),h.push(g)}return{domNodes:h}}function P(e){f.value=e.event.toPlainObject(),v.value.open()}function M(e){C("changed",e.start)}const f=l(null),v=l(null);function B(e){i.value.gotoDate(e)}return k({goToDay:B,slot5:r}),(e,t)=>{const n=$("bb-modal");return D(),H(j,null,[N("div",I,[c(u(z),{ref_key:"calendar",ref:b,options:{schedulerLicenseKey:"CC-Attribution-NonCommercial-NoDerivatives",plugins:[u(V),u(S)],locale:"it",initialView:"resourceTimeGridDay",headerToolbar:{start:"prev,next,title",center:"",end:"today"},titleFormat:{year:"numeric",month:"long",day:"numeric",weekday:"long"},slotLabelInterval:r.value?"00:05:00":"00:30:00",slotLabelFormat:{hour:"numeric",minute:"2-digit",omitZeroMinute:!1,meridiem:"short"},allDaySlot:!1,selectable:!0,firstDay:1,slotDuration:r.value?"00:05:00":"00:30:00",slotMinTime:"07:00:00",slotMaxTime:"23:00:00",eventClick:P,datesSet:M,refetchResourcesOnNavigate:!0,resources:{url:e.route(x)},events:{url:e.route(w)},slotLabelClassNames:"bb-fc-slot",slotLabelContent:y,eventClassNames:"bb-fc-event",eventContent:L}},null,8,["options"])]),c(n,{ref_key:"eventModal",ref:v,size:"md","with-close":!0},{close:_(({close:d})=>[c(u(Z),{class:"absolute top-14 right-5 w-5 h-5 text-bb-gray-800 cursor-pointer",onClick:m=>d()},null,8,["onClick"])]),default:_(()=>[c(A,{event:f.value,onEdited:t[0]||(t[0]=()=>i.value.refetchEvents()),onDeleted:t[1]||(t[1]=()=>{i.value.refetchEvents(),v.value.close()})},null,8,["event"])]),_:1},512)],64)}}};export{Y as default};
