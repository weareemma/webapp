import{V as q,r as D,y as F,Y as x,o as i,c as n,a as s,U as e,ae as g,L as u,q as f,J as h,e as j,w as E,I as G,K as o,Q as k,b as N,S as I,E as B}from"./app.c248d67c.js";import{u as J}from"./wizardStore.2226bc2a.js";import{r as $}from"./ClockIcon.a6d9947b.js";const Q=s("div",{class:"text-center mb-8"}," Seleziona gli add-ons che desideri prenotare ",-1),R={class:"max-w-xl mx-auto"},U={class:"text-right my-4"},W=["disabled"],Y=["onClick","disabled"],H={key:0,class:""},K={key:0,class:"space-y-4 py-4"},O={class:"text-3xl font-bold text-bb-blue-500 mb-0"},X=s("p",{class:"text-md text-bb-gray-700 mt-1"},"Puoi selezionare solo un add-on per tipologia",-1),Z=["onClick"],ee={class:"text-bb-blue font-bold text-xl"},te={class:"flex items-center justify-between text-white"},se={class:"flex items-center space-x-2"},ie={class:"bb-wizard__selectable-card__info"},ne={class:"flex items-center space-x-2"},ae={class:"bb-wizard__selectable-card__info flex gap-x-2"},le={key:0},oe={key:1,class:"flex flex-col justify-center items-center"},ce={class:"mb-8"},re={class:"sm:hidden"},de=s("label",{for:"tabs",class:"sr-only"},null,-1),_e={id:"tabs",name:"tabs",class:"block w-full rounded-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500"},ue=["selected"],be={class:"hidden sm:block"},me={class:"flex space-x-4","aria-label":"Tabs"},ve=["aria-current","onClick"],fe={key:0,class:"space-y-4 py-4"},he={class:"text-3xl font-bold text-bb-blue-500 mb-0"},xe=s("p",{class:"text-md text-bb-gray-700 mt-1"},"Puoi selezionare solo un add-on per tipologia",-1),pe=["onClick"],ge={class:"text-bb-blue font-bold text-xl"},ke={class:"flex items-center justify-between text-white"},ye={class:"flex items-center space-x-2"},we={class:"bb-wizard__selectable-card__info"},Ce={class:"flex items-center space-x-2"},ze={key:0,class:"bb-wizard__selectable-card__info flex gap-x-1"},Pe={class:"line-through"},Se={key:1},Ae={key:1},Te={class:"flex justify-center"},Ve=I(" Avanti "),je=I(" Prossima amica "),Le={__name:"StepAddons",setup(Ee){B("prev");const y=B("next"),L=J(),{isValid:C,activeStep:z,people:a,wizardSelection:r,wizardGeneral:P,ready:w}=q(L),d=D(a.value[0].name);F(()=>{x.lg(a.value[0].services_selection.massage)});const S=()=>{let c=a.value.findIndex(m=>m.name===d.value)+1;a.value[c]&&(d.value=a.value[c].name)},M=c=>{d.value=c};function A(c,m,v){a.value.forEach(t=>{(t.name===v||!r.value.different_services)&&(t.addons[c]=[],t.addons[c].push(m))})}function T(c,m){a.value.forEach(v=>{(v.name===m||!r.value.different_services)&&(v.addons[c]=[])})}function p(c,m,v){let t=a.value.find(_=>_.name===c);return t.addons[v].length>0?t.addons[v][0].id===m.id:!1}function V(c){switch(c){case"massage":return"Servizi Extra";case"treatment":return"Trattamenti"}}return(c,m)=>{const v=G("bb-button");return i(),n("div",null,[Q,s("div",R,[s("div",U,[e(C)[e(z).next]&&(e(r).different_services&&d.value===e(a)[e(a).length-1].name||!e(r).different_services)?(i(),n("a",{key:0,class:"cursor-pointer underline",onClick:m[0]||(m[0]=g((...t)=>e(y)&&e(y)(...t),["stop"])),disabled:!e(w)}," Salta Add-on > ",8,W)):u("",!0),e(r).different_services&&d.value!==e(a)[e(a).length-1].name?(i(),n("a",{key:1,class:"cursor-pointer underline",onClick:g(S,["stop"]),disabled:!e(w)}," Salta Add-on > ",8,Y)):u("",!0)]),e(r).different_services?u("",!0):(i(),n("div",H,[d.value===0?(i(!0),n(f,{key:0},h(e(a)[0].services_selection,(t,_)=>(i(),n(f,{key:_},[_!=="updo"?(i(),n("div",K,[s("div",null,[s("p",O,o(V(_)),1),X]),(i(!0),n(f,null,h(e(a)[0].services_selection[_],l=>(i(),n("div",{key:l.id,class:k(["bb-wizard__selectable-card",{"bb-wizard__selectable-card--active":p(0,l,_)}]),onClick:b=>p(0,l,_)?T(_,0):A(_,l,0)},[s("h3",ee,o(l.title),1),s("div",null,o(l.description),1),s("div",te,[s("div",se,[N(e($),{class:"w-4 h-4"}),s("div",ie,o(l.execution_time_fe)+"'",1)]),s("div",ne,[s("div",ae,[s("span",{class:k(e(P).subscribed&&!e(r).multiple?"line-through":"")},o(e(x).printPrice(l.net_price))+"\u20AC",3),e(P).subscribed&&!e(r).multiple?(i(),n("span",le,o(e(x).printPrice(l.net_price_discounted))+"\u20AC",1)):u("",!0)])])])],10,Z))),128))])):u("",!0)],64))),128)):u("",!0)])),e(r).multiple&&e(r).different_services?(i(),n("div",oe,[s("div",ce,[s("div",re,[de,s("select",_e,[(i(!0),n(f,null,h(e(a),t=>(i(),n("option",{key:t.name,selected:t.name===d.value},o(t.name===0?"Tu":"Amica "+t.name),9,ue))),128))])]),s("div",be,[s("nav",me,[(i(!0),n(f,null,h(e(a),t=>(i(),n("button",{key:t.name,class:k([t.name===d.value?"bg-bb-blue-500 text-white":"text-bb-blue-400 hover:text-bb-blue-700","px-6 py-1.5 font-bold text-sm rounded-full"]),"aria-current":t.name===d.value?"page":void 0,onClick:_=>M(t.name)},o(t.name===0?"Tu":"Amica "+t.name),11,ve))),128))])])]),(i(!0),n(f,null,h(e(a),t=>(i(),n("div",{key:t.name},[t.services_selection.massage||t.services_selection.treatment?(i(),n(f,{key:0},[d.value===t.name?(i(!0),n(f,{key:0},h(t.addons,(_,l)=>(i(),n(f,{key:l},[l!=="updo"?(i(),n("div",fe,[s("div",null,[s("p",he,o(V(l)),1),xe]),(i(!0),n(f,null,h(t.services_selection[l],b=>(i(),n("div",{key:b.id,class:k(["bb-wizard__selectable-card",{"bb-wizard__selectable-card--active":p(t.name,b,l)}]),onClick:Ne=>p(t.name,b,l)?T(l,t.name):A(l,b,t.name)},[s("h3",ge,o(b.title),1),s("div",null,o(b.description),1),s("div",ke,[s("div",ye,[N(e($),{class:"w-4 h-4"}),s("div",we,o(b.execution_time_fe)+"'",1)]),s("div",Ce,[t.name===0?(i(),n("div",ze,[s("span",Pe,o(e(x).printPrice(b.net_price))+"\u20AC",1),s("span",null,o(e(x).printPrice(b.net_price_discounted))+"\u20AC",1)])):(i(),n("div",Se,o(b.net_price)+"\u20AC ",1))])])],10,pe))),128))])):u("",!0)],64))),128)):u("",!0)],64)):t.name===d.value?(i(),n("p",Ae,"Nessun add-on disponibile")):u("",!0)]))),128))])):u("",!0),s("div",Te,[e(C)[e(z).next]&&(e(r).different_services&&d.value===e(a)[e(a).length-1].name||!e(r).different_services)?(i(),j(v,{key:0,class:"mt-10",outline:"",onClick:g(e(y),["stop"]),disabled:!e(w)},{default:E(()=>[Ve]),_:1},8,["onClick","disabled"])):u("",!0),e(r).different_services&&d.value!==e(a)[e(a).length-1].name?(i(),j(v,{key:1,class:"mt-10",outline:"",onClick:g(S,["stop"])},{default:E(()=>[je]),_:1},8,["onClick"])):u("",!0)])])])}}};export{Le as default};
