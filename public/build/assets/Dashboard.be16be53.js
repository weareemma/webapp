import{r as s,W as r,g as I,y as st,Y as g,o as e,e as lt,w as l,a as t,b as a,U as i,a4 as T,K as n,c as o,L as c,a8 as b,aB as at,ae as w,q as x,J as L,S as u,X as v,I as B}from"./app.45a2e0de.js";import{_ as nt}from"./CustomerLayout.da8c9787.js";import{_ as it}from"./PhotoUploader.b7fdd38f.js";import{r as rt}from"./UsersIcon.d5f05404.js";import{r as ct}from"./PencilIcon.a5369bd7.js";import{r as ut}from"./TrashIcon.3749b9b5.js";import"./Logo.1cde1930.js";import"./Footer.edc70d2c.js";import"./XIcon.52e671f8.js";import"./PencilIcon.9b9a523e.js";import"./disclosure.b237ce99.js";import"./menu.365b37e7.js";const dt={class:"block sm:hidden relative -mt-6 -mx-4 sm:-mx-6 lg:-mx-8 h-64"},_t=u(" Prenota "),pt=t("img",{src:"/img/mobile-hero-2.jpeg",class:"h-full w-full object-cover object-center"},null,-1),mt={class:"flex justify-between items-start py-7 gap-x-4 flex-wrap gap-y-4"},bt={class:"text-xl font-bold text-bb-black"},ht=t("p",{class:"mt-2 text-sm"}," Benvenuto nella tua dashboard ",-1),vt={key:0,class:"items-center rounded-full bg-bb-green-300 px-8 py-2 text-sm font-bold text-bb-blue-500 text-center hidden sm:block"},ft={class:"flex flex-col justify-start iems-start mt-4"},gt={key:0,class:"bb-card bg-bb-lightblue w-full py-7 px-8 mb-10 shadow-lg"},xt={class:"flex justify-between gap-1 flex-wrap"},kt=t("p",null,"Usa questo codice sconto per invitare un altro utente",-1),yt={class:"text-xl font-bold text-bb-aqua-500"},Ct={key:1,class:"bb-card bg-bb-lightblue w-full py-7 px-8 mb-10"},wt={class:"flex justify-between items-start gap-x-2"},Bt={class:"font-bold text-bb-blue-500"},Mt=t("p",{class:"text-sm text-bb-gray-800 my-3"}," Carica una foto del risultato e dicci come \xE8 andata! ",-1),Dt=u("Carica le foto"),Yt={key:2,class:"bb-card py-7 px-8 shadow-lg rounded-xl"},jt=t("h3",{class:"text-xl font-bold text-bb-blue-500"}," Prossimo appuntamento ",-1),At={key:0,class:"flex justify-between items-start mb-6"},St={class:"mt-6 font-semibold text-sm"},Lt={class:"flex justify-start gap-2 items-center mt-5"},Pt=t("svg",{width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M13.0026 12.9994C11.8109 12.9994 10.8359 12.0244 10.8359 10.8327C10.8359 9.64102 11.8109 8.66602 13.0026 8.66602C14.1943 8.66602 15.1693 9.64102 15.1693 10.8327C15.1693 12.0244 14.1943 12.9994 13.0026 12.9994ZM19.5026 11.0493C19.5026 7.11685 16.6318 4.33268 13.0026 4.33268C9.37344 4.33268 6.5026 7.11685 6.5026 11.0493C6.5026 13.5844 8.6151 16.9427 13.0026 20.951C17.3901 16.9427 19.5026 13.5844 19.5026 11.0493ZM13.0026 2.16602C17.5526 2.16602 21.6693 5.65435 21.6693 11.0493C21.6693 14.646 18.7768 18.9035 13.0026 23.8327C7.22844 18.9035 4.33594 14.646 4.33594 11.0493C4.33594 5.65435 8.4526 2.16602 13.0026 2.16602Z",fill:"#99A7DA"})],-1),zt={class:"text-sm"},Nt={class:"flex justify-start gap-2 items-center mt-4"},Vt=t("svg",{width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M5.9585 5.49048C5.9585 5.44769 5.99045 5.41139 6.0327 5.40598L17.3779 3.94239C20.2271 3.57406 22.7502 5.79327 22.7502 8.66573C22.7502 11.5382 20.2265 13.7569 17.3779 13.3891L6.0327 11.9255C6.01217 11.9228 5.9933 11.9128 5.97964 11.8972C5.96598 11.8817 5.95846 11.8617 5.9585 11.841V5.49048Z",stroke:"#99A7DA"}),t("path",{d:"M5.95841 5.41667L2.16675 3.25V14.0833L5.95841 11.9167",stroke:"#99A7DA","stroke-linecap":"round","stroke-linejoin":"round"}),t("path",{d:"M20.5829 12.459L16.9569 21.0704C16.7472 21.5684 16.3952 21.9934 15.9451 22.2923C15.4949 22.5912 14.9666 22.7506 14.4263 22.7507C12.4627 22.7507 11.134 20.7492 11.8956 18.9395L14.6245 12.459",stroke:"#99A7DA"}),t("path",{d:"M18.9585 13.541C21.6509 13.541 23.8335 11.3584 23.8335 8.66602C23.8335 5.97363 21.6509 3.79102 18.9585 3.79102C16.2661 3.79102 14.0835 5.97363 14.0835 8.66602C14.0835 11.3584 16.2661 13.541 18.9585 13.541Z",stroke:"#99A7DA"})],-1),It={class:"text-sm"},Tt={class:"flex justify-start gap-2 items-center mt-4"},$t={class:"text-sm"},qt={class:"flex justify-start items-center gap-x-2"},Et=["onClick"],Ut={key:1,class:"my-2"},Zt=t("p",null,"Nessun appuntamento programmato.",-1),Ht=t("p",null,"Prenotalo subito.",-1),Ft=u("Prenota"),Gt=u("Vai agli appuntamenti"),Jt={key:3,class:"bb-card py-7 px-8 shadow-lg rounded-xl"},Kt=t("h3",{class:"text-xl font-bold text-bb-blue-500"}," A breve apriremo il nostro store! ",-1),Ot=t("div",{class:"my-2"},[t("p",null,"Ti avviseremo quando sar\xE0 possibile effettuare una prenotazione.")],-1),Wt=[Kt,Ot],Xt={key:4,class:"bb-card py-7 px-8 shadow-lg rounded-xl mt-10 customer-subscription-card"},Qt={class:"flex justify-between items-center"},Rt=t("h3",{class:"text-xl font-bold text-bb-aqua-500"}," Abbonamento e pacchetti ",-1),te={key:0,class:"font-bold mt-4 text-sm"},ee={key:1,class:"font-bold mt-4 text-sm"},oe={key:0,class:"text-sm mt-1"},se={key:1,class:"text-sm mt-1"},le={key:1,class:"text-sm mt-1"},ae=t("div",{class:"bg-white h-[1px] w-3/4 my-3"},null,-1),ne={class:"font-bold mt-4 text-sm"},ie=t("p",{class:"text-sm"},"Hai ancora a disposizione:",-1),re={class:"text-sm"},ce=u("Dettagli"),ue=t("div",{class:"customer-girl-img-card"},null,-1),de={key:5,class:"bb-card py-7 px-8 shadow-lg rounded-xl mt-10"},_e=t("h3",{class:"text-xl font-bold text-bb-blue-500"},"Le tue immagini",-1),pe={class:"flex justify-start items-center gap-4 flex-wrap"},me=["src"],be=u("Vai alla gallery"),he=u(" Cancella prenotazione "),ve=t("span",null," Sei sicuro di voler cancellare la prenotazione? ",-1),fe=u(" Cancella "),ge=t("h3",{class:"text-bb-blue-500"},"Ultimo appuntamento",-1),xe={class:"mt-5"},ke={class:"mb-4"},ye=u(" Carica una o pi\xF9 foto del risultato finale. "),Ce=u(" Annulla "),we=u(" Salva "),Ie={__name:"Dashboard",props:{lastPhotos:{type:Array,default:null},stripeSubscription:{type:Object,default:null}},setup(k){const $=s(r().props.value.customer.user),M=s(r().props.value.customer.customer_discount),q=s(r().props.value.promo_name),E=s(r().props.value.promo_expires),U=I(()=>r().props.value.impersonate),Z=I(()=>U.value?!1:r().props.value.booking_locked);st(()=>{g.lg(D.value),m.value!==null&&(j.value=m.value.photos)});const D=s(r().props.value.customer.packages),p=s(r().props.value.customer.subscription),Y=s(r().props.value.customer.subscription_ends_at),d=s(r().props.value.customer.next_booking),P=s(r().props.value.customer.can_edit_next_booking),m=s(r().props.value.customer.last_booking),z=s(m.value!==null);function H(){z.value=!1}const y=s(null),F=s(null),j=s([]),N=s(null);function G(){y.value.open()}function J(){g.lg(m.value.id),v.Inertia.post(route("customer.booking.uploadPhotos",m.value.id),{photos:N.value},{onSuccess:h=>{g.flash(h.props.flash),y.value.close(),j.value=r().props.value.customer.last_booking.photos}})}function K(){v.Inertia.visit(route("customer.bookings.future"))}function O(){v.Inertia.visit(route("plan.detail"))}function W(){v.Inertia.visit(route("booking.edit",d.value))}function X(){v.Inertia.visit(route("customer.gallery"))}const A=s(null);s(null);const Q=s(!1);function R(){A.value.open()}function tt(){v.Inertia.delete(route("booking.destroy",d.value.id),{onSuccess:h=>{g.flash(h.props.flash),d.value=r().props.value.customer.next_booking,A.value.close()}})}return(h,C)=>{const f=B("bb-button"),S=B("BbButton"),V=B("BbDialog"),et=B("bb-label");return e(),lt(nt,{title:"Dashboard"},{default:l(()=>[t("div",dt,[a(i(T),{href:h.route("booking.wizard"),class:"absolute top-4 right-4 bb-button-rounded-primary py-2 px-4 shadow-md"},{default:l(()=>[_t]),_:1},8,["href"]),pt]),t("div",mt,[t("div",null,[t("h2",bt," Ciao "+n($.value.name)+"! ",1),ht]),t("div",null,[p.value?(e(),o("span",vt,n(p.value.name),1)):c("",!0)])]),t("div",ft,[p.value&&M.value&&M.value.available?(e(),o("div",gt,[t("div",xt,[kt,t("p",yt,n(M.value.code),1)])])):c("",!0),z.value?(e(),o("div",Ct,[t("div",wt,[t("div",null,[t("p",Bt," Come \xE8 andato l'appuntamento del "+n(i(b)(m.value.start_date).format("D MMMM YYYY"))+" alle ore "+n(i(b)(m.value.start_date).format("H:mm"))+"? ",1),Mt,a(f,{onClick:G,light:"",class:"mt-4"},{default:l(()=>[Dt]),_:1})]),t("div",null,[a(i(at),{onClick:H,class:"w-4 h-4 text-white cursor-pointer"})])])])):c("",!0),i(Z)?(e(),o("div",Jt,Wt)):(e(),o("div",Yt,[jt,d.value?(e(),o("div",At,[t("div",null,[t("p",St,n(i(b)(d.value.start_date).format("D MMMM YYYY"))+" ore "+n(i(b)(d.value.start_date).format("H:mm")),1),t("div",Lt,[Pt,t("p",zt,n(d.value.store.name)+" - "+n(d.value.store.address),1)]),t("div",Nt,[Vt,t("p",It,n(i(g).printServices(d.value)),1)]),t("div",Tt,[a(i(rt),{class:"w-6 h-6 stroke-[#99A7DA]"}),t("p",$t,n(d.value.guest_count+1),1)])]),t("div",qt,[P.value?(e(),o("button",{key:0,onClick:W,type:"button",class:"icon-button !bg-bb-lightblue !rounded-full !text-bb-blue-500"},[a(i(ct))])):c("",!0),P.value?(e(),o("button",{key:1,type:"button",class:"icon-button !bg-bb-lightblue !rounded-full !text-bb-blue-500",onClick:w(R,["prevent"])},[a(i(ut))],8,Et)):c("",!0)])])):(e(),o("div",Ut,[Zt,Ht,a(i(T),{href:h.route("booking.wizard")},{default:l(()=>[a(f,{type:"button",class:"w-full sm:w-auto mt-6 mb-4"},{default:l(()=>[Ft]),_:1})]),_:1},8,["href"])])),a(f,{light:"",outline:"",class:"w-full sm:w-auto",onClick:w(K,["prevent"])},{default:l(()=>[Gt]),_:1},8,["onClick"])])),p.value||D.value.length>0?(e(),o("div",Xt,[t("div",Qt,[t("div",null,[Rt,p.value?(e(),o("p",te,n(p.value.name),1)):(e(),o("p",ee," Nessun abbonamento attivo ")),p.value?(e(),o(x,{key:2},[p.value.name!==q.value?(e(),o(x,{key:0},[k.stripeSubscription&&!Y.value?(e(),o("p",oe," Prossimo rinnovo il "+n(i(b).unix(k.stripeSubscription.current_period_end).format("D/M/YYYY")),1)):c("",!0),Y.value?(e(),o("p",se," Scade il "+n(i(b)(Y.value).format("D/M/YYYY")),1)):c("",!0)],64)):(e(),o("p",le," Scade il "+n(i(b)(E.value).format("D/M/YYYY")),1))],64)):c("",!0),ae,(e(!0),o(x,null,L(D.value,_=>(e(),o("div",{key:_.id,class:"mb-2"},[t("p",ne,n(_.name),1),t("div",null,[ie,(e(!0),o(x,null,L(_.services_formatted,ot=>(e(),o("p",re,n(ot),1))),256))])]))),128)),a(f,{light:"",outline:"",class:"mt-8 !bg-bb-lightblue hover:border-white",onClick:w(O,["prevent"])},{default:l(()=>[ce]),_:1},8,["onClick"])]),ue])])):c("",!0),k.lastPhotos.length>0?(e(),o("div",de,[_e,t("div",pe,[(e(!0),o(x,null,L(k.lastPhotos,_=>(e(),o("div",{key:_.id},[_.id>0?(e(),o("img",{key:0,class:"inline-block h-20 w-20 rounded-md object-fill",src:_.url,alt:""},null,8,me)):c("",!0)]))),128))]),a(f,{light:"",outline:"",class:"mt-8",onClick:w(X,["prevent"])},{default:l(()=>[be]),_:1},8,["onClick"])])):c("",!0)]),a(V,{ref_key:"deleteDialog",ref:A,type:"plain",size:"sm"},{title:l(()=>[he]),buttons:l(()=>[a(S,{danger:"",disabled:Q.value,onClick:tt},{default:l(()=>[fe]),_:1},8,["disabled"])]),default:l(()=>[ve]),_:1},512),a(V,{ref_key:"lastBookingModal",ref:y,type:"plain",size:"md","no-cancel":!0},{title:l(()=>[ge]),buttons:l(()=>[a(S,{secondary:"",light:"",onClick:C[1]||(C[1]=_=>y.value.close())},{default:l(()=>[Ce]),_:1}),a(S,{primary:"",onClick:J},{default:l(()=>[we]),_:1})]),default:l(()=>[t("div",xe,[t("div",ke,[a(et,{class:"mb-4 text-sm text-bb-gray-600"},{default:l(()=>[ye]),_:1}),a(it,{ref_key:"photosUploader",ref:F,photos:j.value,onChanged:C[0]||(C[0]=_=>N.value=_)},null,8,["photos"])])])]),_:1},512)]),_:1})}}};export{Ie as default};
