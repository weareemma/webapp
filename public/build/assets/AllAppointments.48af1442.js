import{r as b,o as v,c as w,b as o,w as l,q as j,I as i,a as t,U as a,ag as A,Q as N,a8 as x,K as k,L as U,S as r,X as V}from"./app.c248d67c.js";import{_ as O}from"./AppLayout.4269b78a.js";import{u as $}from"./search.181f2eee.js";import{B as E}from"./SearchInput.2608ef07.js";import{r as H,B as L}from"./Table.94a0e2ae.js";import{B as P}from"./Popover.a6db3f26.js";import Y from"./ScheduleAppointmentStatusBadge.3b648ebd.js";import"./Logo.d971df1b.js";import"./wizardStore.2226bc2a.js";import"./menu.6da08311.js";import"./ChevronDownIcon.f3847a45.js";import"./CheckIcon.5f685430.js";import"./XIcon.0ce515ba.js";import"./RefreshIcon.6547917e.js";import"./PencilIcon.50f1eb3f.js";const q={class:"pb-16"},Q=t("h2",{class:"text-2xl font-extrabold text-bb-primary mb-3"}," Tutti gli appuntamenti ",-1),R={class:"flex items-center justify-between mb-4 flex-wrap gap-2"},K=t("div",null,null,-1),X={class:"flex justify-start gap-x-2"},Z=t("svg",{width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M10 5C14.9706 5 19 4.10457 19 3C19 1.89543 14.9706 1 10 1C5.02944 1 1 1.89543 1 3C1 4.10457 5.02944 5 10 5Z","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),t("path",{d:"M1 3C1 5.23 4.871 9.674 6.856 11.805C7.58416 12.5769 7.99291 13.5959 8 14.657V20L12 18V14.657C12 13.596 12.421 12.582 13.144 11.805C15.13 9.674 19 5.231 19 3","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),G=[Z],J=t("h3",{class:"text-bb-blue-500 font-bold mb-2"},"Filtri",-1),W={class:"flex justify-start items-center gap-4 flex-wrap"},ee={class:"min-w-[225px]"},te=r("Tipologia servizio"),oe={class:"min-w-[225px]"},se=r("Stato"),le={class:"min-w-[225px]"},ne=r("Pagati Online / Store"),ae=r("Da"),ie=r("A"),re={class:"bg-white rounded-xl overflow-hidden truncate"},de={key:0,class:"bg-[#FFDEAD] rounded-full h-7 w-7 grid place-items-center"},ue=t("img",{src:"/img/alert-icon.svg",class:"w-4 h-4"},null,-1),me=[ue],ce={class:"bg-bb-primary text-white rounded text-xs p-4 max-w-[124px]"},pe=r(" Elimina appuntamento "),_e=t("span",null,"Una volta eliminato, non potrai pi\xF9 recuperare le informazioni.",-1),be=r(" Elimina "),ze={__name:"AllAppointments",props:{store:Object,bookings:Object},setup(f){const{searchQuery:u,isSearching:C,filters:n}=$("schedule.appointment.all",{from:route().params.from,to:route().params.to,status:route().params.status,type:route().params.type,online:route().params.online}),c=b(!1),y=b(null),h=b(null);function M(p,s){switch(p){case"view":V.Inertia.visit(route("booking.show",s.id));break}}function B(){V.Inertia.delete(route("booking.destroy",y.value.id),{onFinish:()=>{h.value.close()}})}function S(){window.open(route("booking.export",{from:n.from,to:n.to,status:n.status,type:n.type,online:n.online,q:u.value}),"_blank")}return(p,s)=>{const D=i("bb-button"),d=i("bb-label"),_=i("bb-select"),g=i("datepicker"),T=i("Link"),z=i("BbButton"),F=i("BbDialog");return v(),w(j,null,[o(O,{title:"Appointments all","show-title":!1},{default:l(()=>[t("div",q,[Q,t("div",R,[t("div",null,[o(E,{isSearching:a(C),modelValue:a(u),"onUpdate:modelValue":s[0]||(s[0]=e=>A(u)?u.value=e:null)},null,8,["isSearching","modelValue"])]),K,t("div",X,[o(D,{type:"button",onClick:S},{default:l(()=>[o(a(H),{class:"w-6 h-6"})]),_:1}),t("button",{class:"bb-button-style-filter p-3",type:"button",onClick:s[1]||(s[1]=e=>c.value=!c.value)},G)])]),t("div",{class:N("bb-card mb-3 px-7 py-5 "+(c.value?"block":"hidden"))},[J,t("div",W,[t("div",ee,[o(d,{class:"text-sm mb-1"},{default:l(()=>[te]),_:1}),o(_,{mode:"single",class:"w-full",placeholder:"Seleziona un'opzione","close-on-select":!0,options:{treatment:"Trattamento",updo:"Raccolto",massage:"Massaggio"},modelValue:a(n).type,"onUpdate:modelValue":s[2]||(s[2]=e=>a(n).type=e)},null,8,["modelValue"])]),t("div",oe,[o(d,{class:"text-sm mb-1"},{default:l(()=>[se]),_:1}),o(_,{mode:"single",class:"w-full",placeholder:"Seleziona un'opzione","close-on-select":!0,options:{todo:"Da fare",progress:"In corso",ended:"Concluso",not_executed:"Non eseguito",not_shown:"Non presentato",canceled:"Cancellato"},modelValue:a(n).status,"onUpdate:modelValue":s[3]||(s[3]=e=>a(n).status=e)},null,8,["modelValue"])]),t("div",le,[o(d,{class:"text-sm mb-1"},{default:l(()=>[ne]),_:1}),o(_,{mode:"single",class:"w-full",placeholder:"Seleziona un'opzione","close-on-select":!0,options:{store:"In store",online:"Online"},modelValue:a(n).online,"onUpdate:modelValue":s[4]||(s[4]=e=>a(n).online=e)},null,8,["modelValue"])]),t("div",null,[o(d,{class:"text-sm mb-1"},{default:l(()=>[ae]),_:1}),o(g,{modelValue:a(n).from,"onUpdate:modelValue":s[5]||(s[5]=e=>a(n).from=e),format:"dd/MM/yyyy",previewFormat:"dd/MM/yyyy",locale:"it-IT",modelType:"dd/MM/yyyy",enableTimePicker:!1,monthNameFormat:"long",autoApply:""},null,8,["modelValue"])]),t("div",null,[o(d,{class:"text-sm mb-1"},{default:l(()=>[ie]),_:1}),o(g,{modelValue:a(n).to,"onUpdate:modelValue":s[6]||(s[6]=e=>a(n).to=e),format:"dd/MM/yyyy",previewFormat:"dd/MM/yyyy",locale:"it-IT",modelType:"dd/MM/yyyy",enableTimePicker:!1,monthNameFormat:"long",autoApply:""},null,8,["modelValue"])])])],2),t("div",re,[o(L,{collection:f.bookings.data,columns:[{label:"Data",computed:e=>e.date?a(x)(e.date).format("DD/MM/YYYY"):"-"},{label:"Ora",computed:e=>{if(!e.start)return"-";const m=a(x)(`2000-01-01 ${e.start}`),I=m.add(e.total_execution_time,"minutes");return`${m.format("HH:mm")} - ${I.format("HH:mm")}`}},{slot:"customer",label:"Cliente"},{label:"Stylist",key:"stylist.full_name"},{label:"Servizi",computed:e=>e.slots?e.slots.map(m=>m.service.title).join(" - "):"-",classes:"max-w-[240px]"},{label:"Status",slot:"status"},{label:"",slot:"to_pay"}],links:f.bookings.links,actions:[{name:"view",condition:e=>!0}],onAction:s[7]||(s[7]=e=>M(e.action,e.item))},{status:l(({item:e})=>[o(Y,{status:e.status,label:e.status_formatted},null,8,["status","label"])]),customer:l(({item:e})=>[o(T,{href:p.route("customer.show",e.customer.id),class:"underline"},{default:l(()=>[t("strong",null,k(e.customer.full_name),1)]),_:2},1032,["href"])]),to_pay:l(({item:e})=>[o(P,{mode:"hover",class:"h-7 w-7"},{button:l(()=>[e.amount_to_pay>0?(v(),w("div",de,me)):U("",!0)]),panel:l(()=>[t("div",ce," Il cliente deve pagare in store "+k(e.amount_to_pay)+"\u20AC ",1)]),_:2},1024)]),_:1},8,["collection","columns","links","actions"])])])]),_:1}),o(F,{ref_key:"deleteDialog",ref:h,type:"plain",size:"sm"},{title:l(()=>[pe]),buttons:l(()=>[o(z,{danger:"",disabled:y.value.processing,onClick:B},{default:l(()=>[be]),_:1},8,["disabled"])]),default:l(()=>[_e]),_:1},512)],64)}}};export{ze as default};
