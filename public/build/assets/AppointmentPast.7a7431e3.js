import{r as _,o as b,c as f,b as s,w as t,q as V,I as d,a as o,K as p,U as l,ag as C,a8 as h,L as F,S as v,a9 as I,X as g}from"./app.c248d67c.js";import{_ as j}from"./AppLayout.4269b78a.js";import{u as A}from"./search.181f2eee.js";import{B as $}from"./SearchInput.2608ef07.js";import{B as E}from"./Table.94a0e2ae.js";import{B as H}from"./Popover.a6db3f26.js";import N from"./ScheduleAppointmentStatusBadge.3b648ebd.js";import"./Logo.d971df1b.js";import"./wizardStore.2226bc2a.js";import"./menu.6da08311.js";import"./ChevronDownIcon.f3847a45.js";import"./CheckIcon.5f685430.js";import"./XIcon.0ce515ba.js";import"./RefreshIcon.6547917e.js";import"./PencilIcon.50f1eb3f.js";const Y={class:"pb-16"},z={class:"text-2xl font-extrabold text-bb-primary mb-3"},L={class:"flex items-center justify-between mb-4"},O={class:"bg-white rounded-xl overflow-hidden truncate"},T={key:0,class:"bg-[#FFDEAD] rounded-full h-7 w-7 grid place-items-center"},U=o("img",{src:"/img/alert-icon.svg",class:"w-4 h-4"},null,-1),M=[U],P={class:"bg-bb-primary text-white rounded text-xs p-4 max-w-[124px]"},q=v(" Elimina appuntamento "),K=o("span",null,"Una volta eliminato, non potrai pi\xF9 recuperare le informazioni.",-1),Q=v(" Elimina "),ce={__name:"AppointmentPast",props:{store:Object,bookings:Object},setup(i){const{searchQuery:r,isSearching:k}=A("schedule.appointment.past"),c=_(null),u=_(null);function w(m,a){switch(m){case"view":g.Inertia.visit(route("booking.show",a.id));break;case"delete":c.value=I(a),u.value.open();break}}function x(){g.Inertia.delete(route("booking.destroy",c.value.id),{onFinish:()=>{u.value.close()}})}return(m,a)=>{const y=d("Link"),B=d("BbButton"),D=d("BbDialog");return b(),f(V,null,[s(j,{title:"Appointments schedule","show-title":!1},{default:t(()=>[o("div",Y,[o("h2",z," Calendario "+p(i.store.name),1),o("div",L,[o("div",null,[s($,{isSearching:l(k),modelValue:l(r),"onUpdate:modelValue":a[0]||(a[0]=e=>C(r)?r.value=e:null)},null,8,["isSearching","modelValue"])])]),o("div",O,[s(E,{collection:i.bookings.data,columns:[{label:"Data",computed:e=>e.date?l(h)(e.date).format("DD/MM/YYYY"):"-"},{label:"Ora",computed:e=>{if(!e.start)return"-";const n=l(h)(`2000-01-01 ${e.start}`),S=n.add(e.total_execution_time,"minutes");return`${n.format("HH:mm")} - ${S.format("HH:mm")}`}},{slot:"customer",label:"Cliente"},{label:"Stylist",key:"stylist.full_name"},{label:"Servizi",computed:e=>e.slots?e.slots.map(n=>n.service.title).join(" - "):"-",classes:"max-w-[240px]"},{label:"Status",slot:"status"},{label:"",slot:"to_pay"}],links:i.bookings.links,actions:[{name:"view",condition:e=>!0},{name:"delete",condition:e=>!e.is_past}],onAction:a[1]||(a[1]=e=>w(e.action,e.item))},{status:t(({item:e})=>[s(N,{status:e.status,label:e.status_formatted},null,8,["status","label"])]),customer:t(({item:e})=>[s(y,{href:m.route("customer.show",e.customer.id),class:"underline"},{default:t(()=>[o("strong",null,p(e.customer.full_name),1)]),_:2},1032,["href"])]),to_pay:t(({item:e})=>[s(H,{mode:"hover",class:"h-7 w-7"},{button:t(()=>[e.amount_to_pay>0?(b(),f("div",T,M)):F("",!0)]),panel:t(()=>[o("div",P," Il cliente deve pagare in store "+p(e.amount_to_pay)+"\u20AC ",1)]),_:2},1024)]),_:1},8,["collection","columns","links","actions"])])])]),_:1}),s(D,{ref_key:"deleteDialog",ref:u,type:"plain",size:"sm"},{title:t(()=>[q]),buttons:t(()=>[s(B,{danger:"",disabled:c.value.processing,onClick:x},{default:t(()=>[Q]),_:1},8,["disabled"])]),default:t(()=>[K]),_:1},512)],64)}}};export{ce as default};
