import{_ as tt}from"./StylistLayout.c6e352be.js";import{y as ot,Y as c,a9 as et,r as m,o as d,e as h,w as e,a as t,b as l,U as r,aL as st,K as b,a8 as O,S as a,c as v,q as nt,J as lt,L as _,X as V,I as g}from"./app.45a2e0de.js";import it from"./BookingStatusBadge.ac9b5c2d.js";import{_ as at}from"./PhotoUploader.b7fdd38f.js";import{r as rt}from"./PencilIcon.9b9a523e.js";import"./Logo.1cde1930.js";import"./wizardStore.ef397de9.js";import"./XIcon.52e671f8.js";import"./menu.365b37e7.js";import"./disclosure.b237ce99.js";const ct={class:"mx-auto max-w-7xl sm:px-6 lg:px-8 sm:mt-10"},ut={class:"mx-auto max-w-3xl"},dt=a(" Torna indietro "),bt={class:"bb-card-stylist px-8 py-7 mt-5 bg-[#C6E4E7] text-bb-gray-800"},mt={class:"text-lg font-semibold"},_t={class:"flex justify-start gap-3 items-center mt-3 mb-5"},gt=["src"],pt=["href"],ft={class:"font-semibold underline"},kt={class:"grid grid-cols-8 gap-x-2 gap-y-3 items-baseline"},ht=t("p",{class:"text-sm text-bb-gray-700 col-span-2 sm:col-span-1"},"SERVIZI",-1),vt={class:"text-bb-gray-800 inline-block col-span-6 sm:col-span-7"},yt=t("p",{class:"text-sm text-bb-gray-700 col-span-2 sm:col-span-1"},"EXTRA",-1),xt={class:"text-bb-gray-800 col-span-6 sm:col-span-7 flex items-center gap-x-2"},Ct=t("p",{class:"text-sm text-bb-gray-700 col-span-2 sm:col-span-1"},"STATO",-1),wt={class:"col-span-6 sm:col-span-7"},St=t("p",{class:"text-sm text-bb-gray-700 col-span-2 sm:col-span-1"},"STORE",-1),Et={class:"text-bb-gray-800 col-span-6 sm:col-span-7"},zt={key:0},Vt=t("div",{class:"relative"},[t("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[t("div",{class:"w-full border-t border-gray-300"})]),t("div",{class:"relative flex justify-center"},[t("span",{class:"bg-white px-2 text-sm text-gray-500 my-4"})])],-1),Dt={class:"flex justify-start items-center gap-4 flex-wrap"},Mt=["onClick","src"],Nt={class:"bb-card p-0 overflow-hidden bg-white"},Tt=["src"],Bt={key:0,class:"mt-4"},$t=t("p",{class:"text-sm text-bb-gray-700 col-span-1"},"NOTE APPUNTAMENTO",-1),jt={class:"text-bb-gray-800 inline-block col-span-7"},It={key:1,class:"mt-4"},At=t("p",{class:"text-sm text-bb-gray-700 col-span-1"},"NOTE CLIENTE",-1),Yt={class:"text-bb-gray-800 inline-block col-span-7 m-0"},Ft={class:"text-bb-gray-600 m-0 text-xs col-span-7"},Ut={class:"flex justify-end mt-6 gap-2"},Ot=a("Non presentato"),Lt=a("Modifica"),Pt=a("Inizia servizio"),Rt=a("Termina servizio"),qt=a("Modifica resoconto"),Qt=a(" Inizia servizio "),Xt=t("span",null,"Confermi che il servizio sta iniziando?",-1),Jt=a(" Annulla "),Kt=a(" Conferma "),Zt=t("h3",{class:"text-bb-blue-500"},"Il servizio \xE8 terminato?",-1),Gt=t("p",{class:"text-bb-gray-800"}," Confermi che il servizio \xE8 terminato? ",-1),Ht=t("p",{class:"text-bb-gray-800"}," Carica una foto del risultato finale e inserisci eventuali note utili sul cliente e sul lavoro svolto. ",-1),Wt={class:"mt-5"},to={class:"mb-4"},oo=a(" Foto "),eo=a(" Carica una o pi\xF9 foto del risultato finale. "),so={class:"mb-4"},no=a(" Note sul cliente "),lo=a(" Queste note compariranno nelle info generali del cliente. "),io=a("Note sull'appuntamento"),ao=a(" Annulla "),ro=a(" Conferma "),co=t("h3",{class:"text-bb-blue-500"},"Aggiungi dei servizi extra",-1),uo=a(" Annulla "),bo=a(" Salva "),wo={__name:"Details",props:{booking:Object,services:Object},setup(o){const u=o;ot(()=>{c.lg(u.services),E.value=u.booking.photos});const p=et({booking_id:u.booking.id,stylist_notes:u.booking.stylist_notes,customer_notes:u.booking.customer.last_notes,uid:null}),C=m(null),y=m(null);function L(){p.post(route("stylist.booking.take"),{preserveScroll:!0,onSuccess:i=>{C.value.close(),c.flash(i.props.flash)}})}function P(){p.transform(i=>({...i,photos:D.value})).post(route("stylist.booking.end"),{forceFormData:!0,preserveScroll:!0,onSuccess:i=>{y.value.close(),E.value=u.booking.photos,c.flash(i.props.flash)}})}const R=m(null),E=m([]),D=m(null),M=m(null),N=m(null);function q(i){N.value=i,M.value.open()}function Q(){var i;V.Inertia.visit(route("stylist.booking.edit",(i=u.booking.parent_id)!=null?i:u.booking.id))}function T(){return u.booking.slots.filter(i=>i.service.extra)}function X(){return u.booking.slots.filter(i=>!i.service.extra)}const w=m(null),S=m(null),J=()=>{S.value=T().map(i=>i.service.id),w.value.open()},K=()=>{V.Inertia.post(route("stylist.booking.addExtra",u.booking.id),{services:S.value},{onSuccess:i=>{w.value.close(),c.flash(i.props.flash)}})};function Z(){V.Inertia.post(route("booking.notShown",u.booking.id),{onFinish:()=>{c.flash({type:"success",message:"Stato aggiornato"})}})}return(i,s)=>{const G=g("bb-link"),f=g("bb-button"),H=g("bb-modal"),k=g("BbButton"),z=g("BbDialog"),x=g("bb-label"),B=g("bb-textarea"),W=g("bb-select");return d(),h(tt,{title:"Appuntamento"},{default:e(()=>{var $,j,I,A,Y,F,U;return[t("div",ct,[t("div",ut,[l(G,{href:i.route("stylist.dashboard")},{default:e(()=>[l(r(st),{class:"h-4"}),dt]),_:1},8,["href"]),t("div",bt,[t("p",null,b(r(O)(o.booking.date).format("dddd D MMMM YYYY")),1),t("p",mt,b(o.booking.hour_formatted),1),t("div",_t,[t("img",{class:"h-8 w-8 rounded-full object-cover",src:o.booking.customer.profile_photo_url.replace("3000",""),alt:""},null,8,gt),t("a",{href:i.route("stylist.customer.show",o.booking.customer.id)},[t("p",ft,b(o.booking.customer.full_name),1)],8,pt),t("p",null,b(o.booking.parent_id!==null?"Amica "+o.booking.guest:""),1)]),t("div",kt,[ht,t("p",vt,b(X().map(n=>n.service.title).join(" + ")),1),yt,t("p",xt,[a(b(T().map(n=>n.service.title).join(" + "))+" ",1),l(f,{primary:"",class:"p-1",onClick:s[0]||(s[0]=n=>J())},{default:e(()=>[l(r(rt),{class:"w-3 h-3"})]),_:1})]),Ct,t("div",wt,[l(it,{status:o.booking.status,label:o.booking.status_formatted},null,8,["status","label"])]),St,t("p",Et,b(o.booking.store.name),1)]),o.booking.status===r(c).booking_status_ended?(d(),v("div",zt,[Vt,t("div",Dt,[(d(!0),v(nt,null,lt(o.booking.photos,n=>(d(),v("div",null,[n.id>0?(d(),v("img",{onClick:mo=>q(n.original.replace("3000","")),key:n.id,class:"inline-block h-20 w-20 rounded-md object-cover cursor-pointer",src:n.url.replace("3000",""),alt:""},null,8,Mt)):_("",!0)]))),256))]),l(H,{ref_key:"photoModal",ref:M,size:"md",withClose:!0},{default:e(()=>[t("div",Nt,[t("img",{class:"object-cover",src:N.value},null,8,Tt)])]),_:1},512),o.booking.stylist_notes?(d(),v("div",Bt,[$t,t("p",jt,b(o.booking.stylist_notes),1)])):_("",!0),($=o.booking.customer)!=null&&$.last_notes?(d(),v("div",It,[At,t("p",Yt,b((j=o.booking.customer)==null?void 0:j.last_notes),1),t("p",Ft," Scritte da "+b((A=(I=o.booking.customer)==null?void 0:I.last_notes_by)==null?void 0:A.name)+" "+b((F=(Y=o.booking.customer)==null?void 0:Y.last_notes_by)==null?void 0:F.surname)+" il "+b(r(O)((U=o.booking.customer)==null?void 0:U.last_notes_updated_at).format("DD/MM/YYYY")),1)])):_("",!0)])):_("",!0),t("div",Ut,[o.booking.status===r(c).booking_status_not_executed?(d(),h(f,{key:0,primary:"",light:"",onClick:Z},{default:e(()=>[Ot]),_:1})):_("",!0),!o.booking.multiple&&o.booking.status!==r(c).booking_status_ended&&o.booking.status!==r(c).booking_status_not_shown?(d(),h(f,{key:1,primary:"",light:"",onClick:Q},{default:e(()=>[Lt]),_:1})):_("",!0),o.booking.status===r(c).booking_status_todo||o.booking.status===r(c).booking_status_not_executed?(d(),h(f,{key:2,primary:"",onClick:s[1]||(s[1]=n=>C.value.open())},{default:e(()=>[Pt]),_:1})):_("",!0),o.booking.status===r(c).booking_status_progress?(d(),h(f,{key:3,primary:"",onClick:s[2]||(s[2]=n=>y.value.open())},{default:e(()=>[Rt]),_:1})):_("",!0),o.booking.status===r(c).booking_status_ended||o.booking.status===r(c).booking_status_not_shown?(d(),h(f,{key:4,primary:"",light:"",onClick:s[3]||(s[3]=n=>y.value.open())},{default:e(()=>[qt]),_:1})):_("",!0)])]),l(z,{ref_key:"confirmDialog",ref:C,type:"plain",size:"sm","no-cancel":!0},{title:e(()=>[Qt]),buttons:e(()=>[l(k,{secondary:"",light:"",onClick:s[4]||(s[4]=n=>C.value.close())},{default:e(()=>[Jt]),_:1}),l(k,{primary:"",onClick:L},{default:e(()=>[Kt]),_:1})]),default:e(()=>[Xt]),_:1},512),l(z,{ref_key:"endDialog",ref:y,type:"plain",size:"md","no-cancel":!0},{title:e(()=>[Zt]),buttons:e(()=>[l(k,{secondary:"",light:"",onClick:s[8]||(s[8]=n=>y.value.close())},{default:e(()=>[ao]),_:1}),l(k,{primary:"",onClick:P},{default:e(()=>[ro]),_:1})]),default:e(()=>[Gt,Ht,t("div",Wt,[t("div",to,[l(x,{class:"mb-0 text-bb-gray-800"},{default:e(()=>[oo]),_:1}),l(x,{class:"mb-1 text-sm text-bb-gray-600"},{default:e(()=>[eo]),_:1}),l(at,{ref_key:"photosUploader",ref:R,photos:E.value,onChanged:s[5]||(s[5]=n=>D.value=n)},null,8,["photos"])]),t("div",so,[l(x,{class:"mb-0 text-bb-gray-800"},{default:e(()=>[no]),_:1}),l(x,{class:"mb-1 text-sm text-bb-gray-600"},{default:e(()=>[lo]),_:1}),l(B,{class:"min-h-[180px]",type:"text",placeholder:"Come sono i capelli del cliente? Qualche peculiarit\xE0? Vuoi dare qualche consiglio su come trattarli al meglio?",modelValue:r(p).customer_notes,"onUpdate:modelValue":s[6]||(s[6]=n=>r(p).customer_notes=n)},null,8,["modelValue"])]),t("div",null,[l(x,{class:"mb-1"},{default:e(()=>[io]),_:1}),l(B,{class:"min-h-[180px]",type:"text",placeholder:"Come \xE8 andato l\u2019appuntamento? Tutti i trattamenti richiesti sono stati completati come da procedura? Il cliente \xE8 sembrato soddisfatto?",modelValue:r(p).stylist_notes,"onUpdate:modelValue":s[7]||(s[7]=n=>r(p).stylist_notes=n)},null,8,["modelValue"])])])]),_:1},512),l(z,{ref_key:"extraDialog",ref:w,type:"plain",size:"md","no-cancel":!0},{title:e(()=>[co]),buttons:e(()=>[l(k,{secondary:"",light:"",onClick:s[10]||(s[10]=n=>w.value.close())},{default:e(()=>[uo]),_:1}),l(k,{primary:"",onClick:s[11]||(s[11]=n=>K())},{default:e(()=>[bo]),_:1})]),default:e(()=>[l(W,{mode:"tags",placeholder:"Seleziona uno o pi\xF9 servizi","close-on-select":!1,options:o.services,modelValue:S.value,"onUpdate:modelValue":s[9]||(s[9]=n=>S.value=n)},null,8,["options","modelValue"])]),_:1},512)])])]}),_:1})}}};export{wo as default};
