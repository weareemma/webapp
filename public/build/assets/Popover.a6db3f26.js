import{f as D,s as C,r as k,g as B,aE as K,h as a,i as ie,u as T,l as G,C as J,aF as pe,T as ce,F as ve,M as de,P as M,v as fe,aG as ee,j as _,m as q,n as z,q as te,x as oe,R as H,p as V,aH as E,aI as I,E as Z,H as x,aJ as F,aK as be,B as Pe,D as me,_ as he,I as N,o as U,e as X,w as R,b as A,a5 as Y,ac as ye,aa as ge,ab as Se,Z as $e}from"./app.c248d67c.js";var we=(n=>(n[n.Open=0]="Open",n[n.Closed=1]="Closed",n))(we||{});let ne=Symbol("PopoverContext");function W(n){let m=Z(ne,null);if(m===null){let y=new Error(`<${n} /> is missing a parent <${ue.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(y,W),y}return m}let le=Symbol("PopoverGroupContext");function ae(){return Z(le,null)}let re=Symbol("PopoverPanelContext");function ke(){return Z(re,null)}let ue=D({name:"Popover",props:{as:{type:[Object,String],default:"div"}},setup(n,{slots:m,attrs:y,expose:h}){var t;let e=`headlessui-popover-button-${C()}`,$=`headlessui-popover-panel-${C()}`,d=k(null);h({el:d,$el:d});let c=k(1),l=k(null),g=k(null),f=k(null),u=k(null),P=B(()=>K(d)),w=B(()=>{if(!a(l)||!a(u))return!1;for(let r of document.querySelectorAll("body > *"))if(Number(r==null?void 0:r.contains(a(l)))^Number(r==null?void 0:r.contains(a(u))))return!0;return!1}),p={popoverState:c,buttonId:e,panelId:$,panel:u,button:l,isPortalled:w,beforePanelSentinel:g,afterPanelSentinel:f,togglePopover(){c.value=T(c.value,{[0]:1,[1]:0})},closePopover(){c.value!==1&&(c.value=1)},close(r){p.closePopover();let b=(()=>r?r instanceof HTMLElement?r:r.value instanceof HTMLElement?a(r):a(p.button):a(p.button))();b==null||b.focus()}};V(ne,p),ie(B(()=>T(c.value,{[0]:G.Open,[1]:G.Closed})));let s={buttonId:e,panelId:$,close(){p.closePopover()}},o=ae(),i=o==null?void 0:o.registerPopover;function S(){var r,b,v,O;return(O=o==null?void 0:o.isFocusWithinPopoverGroup())!=null?O:((r=P.value)==null?void 0:r.activeElement)&&(((b=a(l))==null?void 0:b.contains(P.value.activeElement))||((v=a(u))==null?void 0:v.contains(P.value.activeElement)))}return J(()=>i==null?void 0:i(s)),pe((t=P.value)==null?void 0:t.defaultView,"focus",r=>{var b,v;c.value===0&&(S()||!l||!u||(b=a(p.beforePanelSentinel))!=null&&b.contains(r.target)||(v=a(p.afterPanelSentinel))!=null&&v.contains(r.target)||p.closePopover())},!0),ce([l,u],(r,b)=>{var v;p.closePopover(),ve(b,de.Loose)||(r.preventDefault(),(v=a(l))==null||v.focus())},B(()=>c.value===0)),()=>{let r={open:c.value===0,close:p.close};return M({theirProps:n,ourProps:{ref:d},slot:r,slots:m,attrs:y,name:"Popover"})}}}),Be=D({name:"PopoverButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(n,{attrs:m,slots:y,expose:h}){let t=W("PopoverButton"),e=B(()=>K(t.button));h({el:t.button,$el:t.button});let $=ae(),d=$==null?void 0:$.closeOthers,c=ke(),l=c===null?!1:c===t.panelId,g=k(null),f=`headlessui-focus-sentinel-${C()}`;l||J(()=>{t.button.value=g.value});let u=fe(B(()=>({as:n.as,type:m.type})),g);function P(o){var i,S,r,b,v;if(l){if(t.popoverState.value===1)return;switch(o.key){case x.Space:case x.Enter:o.preventDefault(),(S=(i=o.target).click)==null||S.call(i),t.closePopover(),(r=a(t.button))==null||r.focus();break}}else switch(o.key){case x.Space:case x.Enter:o.preventDefault(),o.stopPropagation(),t.popoverState.value===1&&(d==null||d(t.buttonId)),t.togglePopover();break;case x.Escape:if(t.popoverState.value!==0)return d==null?void 0:d(t.buttonId);if(!a(t.button)||((b=e.value)==null?void 0:b.activeElement)&&!((v=a(t.button))!=null&&v.contains(e.value.activeElement)))return;o.preventDefault(),o.stopPropagation(),t.closePopover();break}}function w(o){l||o.key===x.Space&&o.preventDefault()}function p(o){var i,S;n.disabled||(l?(t.closePopover(),(i=a(t.button))==null||i.focus()):(o.preventDefault(),o.stopPropagation(),t.popoverState.value===1&&(d==null||d(t.buttonId)),t.togglePopover(),(S=a(t.button))==null||S.focus()))}function s(o){o.preventDefault(),o.stopPropagation()}return()=>{let o=t.popoverState.value===0,i={open:o},S=l?{ref:g,type:u.value,onKeydown:P,onClick:p}:{ref:g,id:t.buttonId,type:u.value,"aria-expanded":n.disabled?void 0:t.popoverState.value===0,"aria-controls":a(t.panel)?t.panelId:void 0,disabled:n.disabled?!0:void 0,onKeydown:P,onKeyup:w,onClick:p,onMousedown:s},r=ee();function b(){let v=a(t.panel);if(!v)return;function O(){T(r.value,{[F.Forwards]:()=>E(v,I.First),[F.Backwards]:()=>E(v,I.Last)})}O()}return _(te,[M({ourProps:S,theirProps:{...m,...n},slot:i,attrs:m,slots:y,name:"PopoverButton"}),o&&!l&&t.isPortalled.value&&_(q,{id:f,features:z.Focusable,as:"button",type:"button",onFocus:b})])}}});D({name:"PopoverOverlay",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0}},setup(n,{attrs:m,slots:y}){let h=W("PopoverOverlay"),t=`headlessui-popover-overlay-${C()}`,e=oe(),$=B(()=>e!==null?e.value===G.Open:h.popoverState.value===0);function d(){h.closePopover()}return()=>{let c={open:h.popoverState.value===0};return M({ourProps:{id:t,"aria-hidden":!0,onClick:d},theirProps:n,slot:c,attrs:m,slots:y,features:H.RenderStrategy|H.Static,visible:$.value,name:"PopoverOverlay"})}}});let Oe=D({name:"PopoverPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},focus:{type:Boolean,default:!1}},inheritAttrs:!1,setup(n,{attrs:m,slots:y,expose:h}){let{focus:t}=n,e=W("PopoverPanel"),$=B(()=>K(e.panel)),d=`headlessui-focus-sentinel-before-${C()}`,c=`headlessui-focus-sentinel-after-${C()}`;h({el:e.panel,$el:e.panel}),V(re,e.panelId),J(()=>{var s,o;if(!t||e.popoverState.value!==0||!e.panel)return;let i=(s=$.value)==null?void 0:s.activeElement;(o=a(e.panel))!=null&&o.contains(i)||E(a(e.panel),I.First)});let l=oe(),g=B(()=>l!==null?l.value===G.Open:e.popoverState.value===0);function f(s){var o,i;switch(s.key){case x.Escape:if(e.popoverState.value!==0||!a(e.panel)||$.value&&!((o=a(e.panel))!=null&&o.contains($.value.activeElement)))return;s.preventDefault(),s.stopPropagation(),e.closePopover(),(i=a(e.button))==null||i.focus();break}}function u(s){var o,i,S,r,b;let v=s.relatedTarget;!v||!a(e.panel)||(o=a(e.panel))!=null&&o.contains(v)||(e.closePopover(),(((S=(i=a(e.beforePanelSentinel))==null?void 0:i.contains)==null?void 0:S.call(i,v))||((b=(r=a(e.afterPanelSentinel))==null?void 0:r.contains)==null?void 0:b.call(r,v)))&&v.focus({preventScroll:!0}))}let P=ee();function w(){let s=a(e.panel);if(!s)return;function o(){T(P.value,{[F.Forwards]:()=>{E(s,I.Next)},[F.Backwards]:()=>{var i;(i=a(e.button))==null||i.focus({preventScroll:!0})}})}o()}function p(){let s=a(e.panel);if(!s)return;function o(){T(P.value,{[F.Forwards]:()=>{var i,S;let r=a(e.button),b=a(e.panel);if(!r)return;let v=be(),O=v.indexOf(r),se=v.slice(0,O+1),j=[...v.slice(O+1),...se];for(let L of j.slice())if(((S=(i=L==null?void 0:L.id)==null?void 0:i.startsWith)==null?void 0:S.call(i,"headlessui-focus-sentinel-"))||(b==null?void 0:b.contains(L))){let Q=j.indexOf(L);Q!==-1&&j.splice(Q,1)}E(j,I.First,!1)},[F.Backwards]:()=>E(s,I.Previous)})}o()}return()=>{let s={open:e.popoverState.value===0,close:e.close},o={ref:e.panel,id:e.panelId,onKeydown:f,onFocusout:t&&e.popoverState.value===0?u:void 0,tabIndex:-1};return M({ourProps:o,theirProps:{...m,...n},attrs:m,slot:s,slots:{...y,default:(...i)=>{var S;return[_(te,[g.value&&e.isPortalled.value&&_(q,{id:d,ref:e.beforePanelSentinel,features:z.Focusable,as:"button",type:"button",onFocus:w}),(S=y.default)==null?void 0:S.call(y,...i),g.value&&e.isPortalled.value&&_(q,{id:c,ref:e.afterPanelSentinel,features:z.Focusable,as:"button",type:"button",onFocus:p})])]}},features:H.RenderStrategy|H.Static,visible:g.value,name:"PopoverPanel"})}}});D({name:"PopoverGroup",props:{as:{type:[Object,String],default:"div"}},setup(n,{attrs:m,slots:y,expose:h}){let t=k(null),e=k([]),$=B(()=>K(t));h({el:t,$el:t});function d(f){let u=e.value.indexOf(f);u!==-1&&e.value.splice(u,1)}function c(f){return e.value.push(f),()=>{d(f)}}function l(){var f;let u=$.value;if(!u)return!1;let P=u.activeElement;return(f=a(t))!=null&&f.contains(P)?!0:e.value.some(w=>{var p,s;return((p=u.getElementById(w.buttonId))==null?void 0:p.contains(P))||((s=u.getElementById(w.panelId))==null?void 0:s.contains(P))})}function g(f){for(let u of e.value)u.buttonId!==f&&u.close()}return V(le,{registerPopover:c,unregisterPopover:d,isFocusWithinPopoverGroup:l,closeOthers:g}),()=>M({ourProps:{ref:t},theirProps:n,slot:{},attrs:m,slots:y,name:"PopoverGroup"})}});const xe=D({components:{Popover:ue,PopoverButton:Be,PopoverPanel:Oe},props:{mode:{type:String,default:"hover"},distance:{type:Number,default:4},position:{type:String,default:"bottom-right"}},setup(n){const m=k(null),y=k(null),h=k(!1);Pe(h,()=>{me(()=>{h.value&&d()})});function t(){n.mode!="button"&&(h.value=!0)}function e(){n.mode!="button"&&(h.value=!1)}function $(c){return n.mode=="button"&&(h.value=c),h.value}function d(){const c=window.innerWidth,l=m.value.el.getBoundingClientRect(),g=y.value.el,f=g.getBoundingClientRect(),u=n.position;let P="mid";u.includes("top")&&(P="top"),(u.includes("bottom")||u.includes("mid")&&u.includes("center"))&&(P="bottom");let w="right";u.includes("left")&&(w="left"),u.includes("center")&&(w="center");let p=0;switch(w){case"right":p=P=="mid"?l.x+l.width+n.distance:l.x+l.width/2+n.distance;break;case"left":p=P=="mid"?l.x-f.width-n.distance:l.x+l.width/2-f.width-n.distance;break;case"center":p=l.x+l.width/2-f.width/2;break}p<0&&(p=0),p>c&&(p=c-f.width);let s=0;switch(P){case"bottom":s=l.y+l.height+n.distance;break;case"top":s=l.y-f.height-n.distance;break;case"mid":s=l.y+l.height/2-f.height/2;break}g.style.left=`${p}px`,g.style.top=`${s}px`}return{popButton:m,popPanel:y,hoverShow:t,hoverHide:e,getOpenStatus:$}}});function Ee(n,m,y,h,t,e){const $=N("PopoverButton"),d=N("PopoverPanel"),c=N("Popover",!0);return U(),X(c,{class:"relative flex"},{default:R(({open:l,close:g})=>[A($,{ref:"popButton",class:"inline-block",onMouseenter:n.hoverShow,onMouseleave:n.hoverHide},{default:R(()=>[Y(n.$slots,"button")]),_:3},8,["onMouseenter","onMouseleave"]),(U(),X(ye,{to:"body"},[A($e,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:R(()=>[ge(A(d,{static:"",ref:"popPanel",class:"fixed z-50 top-4 left-4"},{default:R(()=>[Y(n.$slots,"panel",{open:l,close:g})]),_:2},1536),[[Se,n.getOpenStatus(l)]])]),_:2},1024)]))]),_:3})}var Fe=he(xe,[["render",Ee]]);export{Fe as B};
