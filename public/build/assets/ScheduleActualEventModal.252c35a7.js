import{r as d,W as F,a8 as u,y as L,o as x,c as B,a as e,b as a,S as c,K as n,U as g,w as l,L as j,e as $,q as O,X as v,Y as m,I as r}from"./app.c248d67c.js";import q from"./ScheduleAppointmentStatusBadge.3b648ebd.js";const G={class:"bb-card p-6 space-y-3 text-bb-gray-800"},K={class:"flex justify-start items-center gap-x-3"},R={class:"text-sm"},W={class:"flex items-center space-x-2"},X=["src"],J={class:"font-bold text-lg underline"},Q={class:"flex"},Z=e("div",{class:"uppercase text-bb-gray-700 w-20 text-xs pt-[5px]"}," Creata ",-1),ee={class:"flex-1"},te={class:"flex"},oe=e("div",{class:"uppercase text-bb-gray-700 w-20 text-xs pt-[5px]"}," Creata da ",-1),se={class:"flex-1"},ae={class:"flex"},ne=e("div",{class:"uppercase text-bb-gray-700 w-20 text-xs pt-[5px]"}," Servizi ",-1),le={class:"flex-1"},ie={key:0,class:"flex items-center"},de=e("div",{class:"uppercase text-bb-gray-700 w-20 text-xs pt-[5px]"}," Stylist ",-1),ce={class:"flex-1"},ue={class:"flex items-center"},re=e("div",{class:"uppercase text-bb-gray-700 w-20 text-xs"},"Status",-1),be={class:"flex-1"},me={class:"flex items-center"},fe=e("div",{class:"uppercase text-bb-gray-700 w-20 text-xs"},"Durata",-1),_e={class:"flex-1"},ge=e("div",{class:"pt-4 mb-4 border-b border-bb-gray-300"},null,-1),ve={class:"flex items-center justify-end space-x-3"},pe=c("Elimina"),ke=c("Modifica"),he=c("Dettaglio"),xe=c(" Elimina appuntamento "),ye=e("p",null,"Una volta eliminato, non potrai pi\xF9 recuperare le informazioni.",-1),De=e("br",null,null,-1),Ce=e("p",null,"Scegli una modalit\xE0 di cancellazione",-1),Ve=c(" Elimina "),Me={__name:"ScheduleActualEventModal",props:{event:Object,booking:Object},emits:["edited","dateChanged","deleted"],setup(t,{emit:y}){const b=t,D=d([]);function I(){axios.get(route("booking.stylists",b.booking.id)).then(s=>{D.value=s.data})}function z(s){v.Inertia.post(route("booking.update.stylist",b.booking.id),{stylist_id:s},{onSuccess:o=>{m.flash(o.props.flash)}})}function H(s){s&&v.Inertia.post(route("booking.update.date",b.booking.id),{date:u(s).format("YYYY-MM-DD")},{onSuccess:o=>{y("dateChanged",s),m.flash(o.props.flash)}})}const C=d(F().props.value.role);function f(){return C.value===m.role_admin||C.value===m.role_manager}const V=d(u(b.booking.start_date)),Y=d(null);L(()=>{f()&&I(),Y.value.closeMenu()});const p=d(null),k=d(!1),h=d("refund");function N(){k.value=!0,v.Inertia.delete(route("booking.destroy",b.booking.id),{data:{method:h.value},onFinish:()=>{m.flash({type:"success",message:"Appuntamento cancellato"}),p.value.close(),y("deleted"),k.value=!1}})}function w(s,o){v.Inertia.visit(route(s,o))}return(s,o)=>{var M;const E=r("datepicker"),U=r("Link"),A=r("bb-select"),_=r("BbButton"),P=r("bb-radio-group"),T=r("BbDialog");return x(),B(O,null,[e("div",G,[e("div",K,[e("div",null,[a(E,{ref_key:"datePick",ref:Y,class:"bb-datepicker-button",modelValue:V.value,"onUpdate:modelValue":[o[0]||(o[0]=i=>V.value=i),H],locale:"it-IT",enableTimePicker:!1,monthNameFormat:"long",autoApply:"","min-date":new Date},null,8,["modelValue","min-date"])]),e("div",R,[c(n(g(u)(t.booking.start_date).format("dddd DD MMMM YYYY"))+" /\xA0 ",1),e("strong",null,n(g(u)(t.event.start).format("HH:mm"))+" - "+n(g(u)(t.event.end).format("HH:mm")),1)])]),e("div",W,[e("img",{src:t.booking.customer.profile_photo_url,class:"block rounded-full w-8 h-8 object-cover object-center"},null,8,X),e("div",J,[a(U,{href:s.route("customer.show",t.booking.customer.id)},{default:l(()=>[c(n(t.booking.customer.full_name),1)]),_:1},8,["href"])]),e("div",null,n(t.booking.is_father?"":"Amica "+t.booking.guest),1)]),e("div",Q,[Z,e("div",ee,n(g(u)(t.booking.created_at).format("DD/MM/YYYY HH:mm")),1)]),e("div",te,[oe,e("div",se,n(t.booking.created_by),1)]),e("div",ae,[ne,e("div",le,n(t.booking.services_as_string),1)]),f()?(x(),B("div",ie,[de,e("div",ce,[a(A,{key:"stylist_select",mode:"single",placeholder:"Seleziona lo stylist","close-on-select":!0,options:D.value,modelValue:t.booking.stylist_id,"onUpdate:modelValue":o[1]||(o[1]=i=>t.booking.stylist_id=i),onChange:z},null,8,["options","modelValue"])])])):j("",!0),e("div",ue,[re,e("div",be,[a(q,{status:t.booking.status},null,8,["status"])])]),e("div",me,[fe,e("div",_e,n((M=t.booking.duration)!=null?M:"-"),1)]),ge,e("div",ve,[a(_,{danger:"",onClick:o[2]||(o[2]=()=>p.value.open())},{default:l(()=>[pe]),_:1}),f()?(x(),$(_,{key:0,light:"",onClick:o[3]||(o[3]=i=>{var S;return w("booking.edit",(S=t.booking.parent_id)!=null?S:t.booking.id)})},{default:l(()=>[ke]),_:1})):j("",!0),a(_,{autofocus:"",onClick:o[4]||(o[4]=i=>w(f()?"booking.show":"stylist.appointment.details",t.booking.id))},{default:l(()=>[he]),_:1})])]),a(T,{ref_key:"deleteDialog",ref:p,type:"plain",size:"sm"},{title:l(()=>[xe]),buttons:l(()=>[a(_,{danger:"",disabled:k.value,onClick:N},{default:l(()=>[Ve]),_:1},8,["disabled"])]),default:l(()=>[ye,De,Ce,a(P,{class:"py-2",modelValue:h.value,"onUpdate:modelValue":o[5]||(o[5]=i=>h.value=i),vertical:!0,options:[{value:"refund",label:"Rimborso"},{value:"discount",label:"Genera sconto"},{value:"none",label:"Nessuna azione"}]},null,8,["modelValue"])]),_:1},512)],64)}}};export{Me as default};
