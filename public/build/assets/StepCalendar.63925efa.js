import{o,e as I,b as m,r as x,c as l,a as t,a5 as $,L as _,V as q,g as J,B as K,y as Q,U as e,K as c,q as y,J as S,Q as u,w as g,ae as R,X as W,I as N,a8 as b,Y as X,S as B,E as z}from"./app.45a2e0de.js";import{u as G}from"./wizardStore.ef397de9.js";import"./VueTimepikcer.esm.048f18c4.js";function T(Y,k){return o(),I("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 5l7 7-7 7"})])}const H={class:"bb-collapsible"},Z={key:0,class:"bb-collpsible__content"},F={__name:"Collapsible",props:{startOpen:{type:Boolean,default:!1}},setup(Y,{expose:k}){const n=x(Y.startOpen);function C(){n.value=!0}function w(){n.value=!1}return k({open:C}),(h,D)=>(o(),l("div",H,[t("div",{class:"bb-collpsible__toggle",onClick:D[0]||(D[0]=p=>n.value=!n.value)},[$(h.$slots,"toggle",{isOpen:n.value,close:w})]),n.value?(o(),l("div",Z,[$(h.$slots,"content",{isOpen:n.value,close:w})])):_("",!0)]))}},ee=t("div",{class:"text-center mb-16"}," Seleziona il giorno e l\u2019ora del tuo appuntamento ",-1),te={class:"space-y-4 max-w-xl mx-auto"},se={key:0},ae={class:"bg-[#A9D6DB] rounded-xl p-8 mb-4"},oe={class:"flex items-center justify-between mb-4"},le={class:"text-lg"},ie={key:0},ne={key:1},re={class:"relative overflow-x-auto"},de={class:"flex space-x-8 pb-4"},ce=["onClick"],ue=t("div",{class:"mb-2 font-bold"}," Altro ",-1),_e=t("div",null," + ",-1),be=[_e],pe={key:0},ve=t("p",{class:"text-center my-5 px-8"},[B(" Sembra che non ci siano slot liberi. "),t("br"),B(" Prova a modificare la prenotazione oppure contattaci. ")],-1),me=[ve],he={key:1},fe={class:"flex justify-between items-center"},ye={class:"font-bold"},ge={key:0,class:"mt-4"},xe={class:"flex items-center justify-between py-2 px-8 bg-[#A9D6DB] rounded-full cursor-pointer mb-4"},ke={class:"font-bold"},we={key:0},De={key:1},Me={class:"space-y-4"},Ye=["disabled","onClick"],Ce={key:2},Se={class:"flex items-center justify-between py-2 px-8 bg-[#A9D6DB] rounded-full cursor-pointer mb-4"},ze={class:"font-bold"},Be={key:0},Ve={key:1},je={class:"space-y-4"},Ae=["disabled","onClick"],Oe=B(" Avanti "),$e={key:1},Ne=t("div",{class:"bg-[#A9D6DB] rounded-xl p-8 mb-4"},[t("div",{class:"flex justify-start items-center gap-2"},[t("p",{class:"text-center"}," Stiamo verificando la disponibilit\xE0 ")])],-1),Te=[Ne],Ee={__name:"StepCalendar",setup(Y){const k=G(),{wizardSelection:s,isValid:n,activeStep:C,ready:w}=q(k),h=z("updateData");z("prev");const D=z("next"),p=x(!1),M=x(null),L=J(()=>!s.value.available_days.find(r=>r.available)),f=x(null),E=x([{time:"08:00",available:!0},{time:"08:15",available:!0},{time:"08:30",available:!0}]);K(f,r=>{W.Inertia.get()}),Q(()=>{});function V(r){console.log(r),s.value.selected_day=r,s.value.selected_slot=null,M.value&&M.value.open(),h()}function j(r){console.log(r),s.value.selected_slot=r,h()}return(r,v)=>{var A,O;const P=N("datepicker"),U=N("bb-button");return o(),l("div",null,[ee,t("div",te,[e(s).available_days?(o(),l("div",se,[t("div",ae,[t("div",null,[t("div",oe,[t("h3",le,[e(s).selected_day?(o(),l("span",ie,c(e(b)((A=e(s).selected_day)==null?void 0:A.date).format("dddd DD MMMM")),1)):(o(),l("span",ne,"Seleziona un giorno"))])]),t("div",re,[t("div",de,[(o(!0),l(y,null,S(e(s).available_days,i=>{var a,d;return o(),l("div",{key:i.date,class:u(["group cursor-pointer flex flex-col items-center",{"opacity-40":!i.available}]),onClick:()=>{i.available&&V(i),p.value=!1}},[t("div",{class:u(["mb-2",{"font-bold":((a=e(s).selected_day)==null?void 0:a.date)===i.date}])},c(e(X).capitalizeFirstLetter(e(b)(i.date).format("ddd"))),3),t("div",{class:u(["rounded-full bg-white w-12 h-12 grid place-items-center",{"group-hover:bg-bb-primary group-hover:text-white":i.available,"bg-bb-primary-800 group-hover:bg-bb-primary-800 text-white":((d=e(s).selected_day)==null?void 0:d.date)==i.date}])},[t("div",null,c(e(b)(i.date).format("DD")),1)],2)],10,ce)}),128)),t("div",{class:"group cursor-pointer flex flex-col items-center",onClick:v[0]||(v[0]=()=>{e(s).selected_day=null,e(s).selected_slot=null,f.value=e(b)(e(s).available_days.slice(-1)[0].date,"YYYY-MM-DD").add(1,"day").format("YYYY-MM-DD"),p.value=!0})},[ue,t("div",{class:u(["rounded-full bg-white w-12 h-12 grid place-items-center",{"group-hover:bg-bb-primary group-hover:text-white":!0,"bg-bb-primary-800 group-hover:bg-bb-primary-800 text-white":p.value}])},be,2)])])])])]),e(L)?(o(),l("div",pe,me)):_("",!0),p.value?(o(),l("div",he,[t("div",fe,[m(P,{class:"bb-datepicker-button",locale:"it-IT",enableTimePicker:!1,monthNameFormat:"long",autoApply:"",minDate:e(b)(e(s).available_days.slice(-1)[0].date,"YYYY-MM-DD").add(1,"day").format("YYYY-MM-DD"),modelValue:f.value,"onUpdate:modelValue":[v[1]||(v[1]=i=>f.value=i),v[2]||(v[2]=()=>{V({date:e(b)(f.value).format("YYYY-MM-DD")})})]},null,8,["minDate","modelValue"]),t("p",ye,c(e(s).selected_day?e(b)((O=e(s).selected_day)==null?void 0:O.date).format("dddd DD MMMM"):""),1)]),e(s).selected_day?(o(),l("div",ge,[t("div",null,[m(F,{ref_key:"slotsCollapsible",ref:M,"start-open":!0},{toggle:g(({isOpen:i})=>{var a;return[t("div",xe,[t("div",ke,[e(s).selected_slot?(o(),l("span",we," Orario selezionato: "+c((a=e(s).selected_slot)==null?void 0:a.time),1)):(o(),l("span",De,"Seleziona un'orario"))]),m(e(T),{class:u(["w-4 h-4 text-white transition transform-gpu",{"rotate-90":i}])},null,8,["class"])])]}),content:g(({close:i})=>[t("div",Me,[(o(!0),l(y,null,S(E.value,a=>{var d;return o(),l(y,{key:a.time},[a.available?(o(),l("button",{key:0,disabled:!a.available,class:u(["rounded-full bg-white w-full shadow px-2 py-2 text-lg text-center cursor-pointer transition-colors disabled:opacity-30",{"hover:bg-bb-primary hover:text-white":a.available,"bg-bb-primary-800 hover:bg-bb-primary-800 text-white":((d=e(s).selected_slot)==null?void 0:d.time)==a.time}]),onClick:()=>{a.available&&(j(a),i())}},c(a.time),11,Ye)):_("",!0)],64)}),128))])]),_:1},512)])])):_("",!0)])):_("",!0),e(s).selected_day&&!p.value?(o(),l("div",Ce,[m(F,{ref_key:"slotsCollapsible",ref:M,"start-open":!0},{toggle:g(({isOpen:i})=>{var a;return[t("div",Se,[t("div",ze,[e(s).selected_slot?(o(),l("span",Be," Orario selezionato: "+c((a=e(s).selected_slot)==null?void 0:a.time),1)):(o(),l("span",Ve,"Seleziona un'orario"))]),m(e(T),{class:u(["w-4 h-4 text-white transition transform-gpu",{"rotate-90":i}])},null,8,["class"])])]}),content:g(({close:i})=>[t("div",je,[(o(!0),l(y,null,S(e(s).selected_day.slots,a=>{var d;return o(),l(y,{key:a.time},[a.available?(o(),l("button",{key:0,disabled:!a.available,class:u(["rounded-full bg-white w-full shadow px-2 py-2 text-lg text-center cursor-pointer transition-colors disabled:opacity-30",{"hover:bg-bb-primary hover:text-white":a.available,"bg-bb-primary-800 hover:bg-bb-primary-800 text-white":((d=e(s).selected_slot)==null?void 0:d.time)==a.time}]),onClick:()=>{a.available&&(j(a),i())}},c(a.time),11,Ae)):_("",!0)],64)}),128))])]),_:1},512)])):_("",!0),e(n)[e(C).next]?(o(),I(U,{key:3,class:"w-full mt-10",outline:"",onClick:R(e(D),["stop"]),disabled:!e(w)},{default:g(()=>[Oe]),_:1},8,["onClick","disabled"])):_("",!0)])):(o(),l("div",$e,Te))])])}}};export{Ee as default};
