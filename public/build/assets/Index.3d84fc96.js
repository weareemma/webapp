import{g as S,r as u,o as x,e as w,w as t,W as D,a as o,b as s,U as n,ag as V,a4 as I,K as i,Q as C,S as b,X as v,Y as z,I as m}from"./app.45a2e0de.js";import{_ as A}from"./AppLayout.f8630d45.js";import{r as N,B as T}from"./Table.e80badd5.js";import{B as j}from"./SearchInput.29274ae3.js";import{u as U}from"./search.6869db3c.js";import"./Logo.1cde1930.js";import"./wizardStore.ef397de9.js";import"./menu.365b37e7.js";import"./ChevronDownIcon.ec8df155.js";import"./CheckIcon.b71d4ea3.js";import"./XIcon.52e671f8.js";import"./PencilIcon.9b9a523e.js";import"./RefreshIcon.76168562.js";const E={class:"flex justify-between mb-4"},O={class:"w-1/2"},Q={class:"grow flex justify-end mr-3"},q=["href"],K=b("Aggiungi"),L={class:"bb-card"},P=b(" Elimina Sconto "),R=o("span",null,"Sei sicuro di voler eliminare questo sconto?",-1),W=b(" Elimina "),ae={__name:"Index",props:{models:Object},setup(p){S(()=>D().props.value.role);const{searchQuery:r,isSearching:h}=U("discount.index"),c=u(null),_=u(null),d=u(!1);function g(l,a){switch(l){case"edit":v.Inertia.visit(route("discount.edit",a.id));break;case"delete":_.value=a,c.value.open();break}}function y(){d.value=!0,v.Inertia.delete(route("discount.destroy",_.value.id),{onSuccess:l=>{c.value.close(),d.value=!1,z.helpers.flash(l.props.flash)}})}return(l,a)=>{const f=m("bb-button"),k=m("BbButton"),B=m("BbDialog");return x(),w(A,{title:"Sconti"},{default:t(()=>[o("div",E,[o("div",O,[s(j,{searching:n(h),modelValue:n(r),"onUpdate:modelValue":a[0]||(a[0]=e=>V(r)?r.value=e:null)},null,8,["searching","modelValue"])]),o("div",Q,[o("a",{href:l.route("discount.export")},[s(f,{type:"button"},{default:t(()=>[s(n(N),{class:"w-6 h-6"})]),_:1})],8,q)]),s(n(I),{href:l.route("discount.create")},{default:t(()=>[s(f,{type:"button"},{default:t(()=>[K]),_:1})]),_:1},8,["href"])]),o("div",L,[s(T,{collection:p.models.data,columns:[{key:"code",label:"Codice",classes:"font-bold"},{key:"offer",label:"Offerta"},{slot:"validity",label:"Valido"},{key:"stores_formatted",label:"Store"},{slot:"usages",label:"Utilizzi"},{slot:"active",label:"Stato"}],links:p.models.links,actions:[{name:"edit",condition:e=>!e.sub},{name:"delete",condition:e=>!e.sub}],onAction:a[1]||(a[1]=e=>g(e.action,e.item))},{validity:t(({item:e})=>[o("p",null,i(e.valid_from)+" - "+i(e.valid_to),1)]),usages:t(({item:e})=>[o("p",null,i(e.usages_count)+"/"+i(e.maximum_count_per_user),1)]),active:t(({item:e})=>[o("span",{class:C(e.active?"bb-badge-success":"bb-badge-secondary")},i(e.active?"Attivo":"Non attivo"),3)]),_:1},8,["collection","links","actions"])]),s(B,{ref_key:"deleteDialog",ref:c,type:"plain",size:"sm"},{title:t(()=>[P]),buttons:t(()=>[s(k,{danger:"",disabled:d.value,onClick:y},{default:t(()=>[W]),_:1},8,["disabled"])]),default:t(()=>[R]),_:1},512)]),_:1})}}};export{ae as default};
