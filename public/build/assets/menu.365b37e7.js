import{f as P,r as x,T as F,g as S,F as A,M as O,h as I,p as $,i as L,u as N,l as T,P as y,s as k,v as B,a6 as j,x as K,R as w,y as E,z as U,C as V,D as R,E as _,H as m,G as q}from"./app.45a2e0de.js";function z(t){throw new Error("Unexpected object: "+t)}var g=(t=>(t[t.First=0]="First",t[t.Previous=1]="Previous",t[t.Next=2]="Next",t[t.Last=3]="Last",t[t.Specific=4]="Specific",t[t.Nothing=5]="Nothing",t))(g||{});function H(t,v){let c=v.resolveItems();if(c.length<=0)return null;let p=v.resolveActiveIndex(),e=p!=null?p:-1,f=(()=>{switch(t.focus){case 0:return c.findIndex(l=>!v.resolveDisabled(l));case 1:{let l=c.slice().reverse().findIndex((o,s,b)=>e!==-1&&b.length-s-1>=e?!1:!v.resolveDisabled(o));return l===-1?l:c.length-1-l}case 2:return c.findIndex((l,o)=>o<=e?!1:!v.resolveDisabled(l));case 3:{let l=c.slice().reverse().findIndex(o=>!v.resolveDisabled(o));return l===-1?l:c.length-1-l}case 4:return c.findIndex(l=>v.resolveId(l)===t.id);case 5:return null;default:z(t)}})();return f===-1?p:f}var J=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(J||{}),Q=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(Q||{});function W(t){requestAnimationFrame(()=>requestAnimationFrame(t))}let C=Symbol("MenuContext");function M(t){let v=_(C,null);if(v===null){let c=new Error(`<${t} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(c,M),c}return v}let X=P({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(t,{slots:v,attrs:c}){let p=x(1),e=x(null),f=x(null),l=x([]),o=x(""),s=x(null),b=x(1);function i(u=n=>n){let n=s.value!==null?l.value[s.value]:null,r=q(u(l.value.slice()),h=>I(h.dataRef.domRef)),d=n?r.indexOf(n):null;return d===-1&&(d=null),{items:r,activeItemIndex:d}}let a={menuState:p,buttonRef:e,itemsRef:f,items:l,searchQuery:o,activeItemIndex:s,activationTrigger:b,closeMenu:()=>{p.value=1,s.value=null},openMenu:()=>p.value=0,goToItem(u,n,r){let d=i(),h=H(u===g.Specific?{focus:g.Specific,id:n}:{focus:u},{resolveItems:()=>d.items,resolveActiveIndex:()=>d.activeItemIndex,resolveId:D=>D.id,resolveDisabled:D=>D.dataRef.disabled});o.value="",s.value=h,b.value=r!=null?r:1,l.value=d.items},search(u){let n=o.value!==""?0:1;o.value+=u.toLowerCase();let r=(s.value!==null?l.value.slice(s.value+n).concat(l.value.slice(0,s.value+n)):l.value).find(h=>h.dataRef.textValue.startsWith(o.value)&&!h.dataRef.disabled),d=r?l.value.indexOf(r):-1;d===-1||d===s.value||(s.value=d,b.value=1)},clearSearch(){o.value=""},registerItem(u,n){let r=i(d=>[...d,{id:u,dataRef:n}]);l.value=r.items,s.value=r.activeItemIndex,b.value=1},unregisterItem(u){let n=i(r=>{let d=r.findIndex(h=>h.id===u);return d!==-1&&r.splice(d,1),r});l.value=n.items,s.value=n.activeItemIndex,b.value=1}};return F([e,f],(u,n)=>{var r;a.closeMenu(),A(n,O.Loose)||(u.preventDefault(),(r=I(e))==null||r.focus())},S(()=>p.value===0)),$(C,a),L(S(()=>N(p.value,{[0]:T.Open,[1]:T.Closed}))),()=>{let u={open:p.value===0};return y({ourProps:{},theirProps:t,slot:u,slots:v,attrs:c,name:"Menu"})}}}),Y=P({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"}},setup(t,{attrs:v,slots:c,expose:p}){let e=M("MenuButton"),f=`headlessui-menu-button-${k()}`;p({el:e.buttonRef,$el:e.buttonRef});function l(i){switch(i.key){case m.Space:case m.Enter:case m.ArrowDown:i.preventDefault(),i.stopPropagation(),e.openMenu(),R(()=>{var a;(a=I(e.itemsRef))==null||a.focus({preventScroll:!0}),e.goToItem(g.First)});break;case m.ArrowUp:i.preventDefault(),i.stopPropagation(),e.openMenu(),R(()=>{var a;(a=I(e.itemsRef))==null||a.focus({preventScroll:!0}),e.goToItem(g.Last)});break}}function o(i){switch(i.key){case m.Space:i.preventDefault();break}}function s(i){t.disabled||(e.menuState.value===0?(e.closeMenu(),R(()=>{var a;return(a=I(e.buttonRef))==null?void 0:a.focus({preventScroll:!0})})):(i.preventDefault(),e.openMenu(),W(()=>{var a;return(a=I(e.itemsRef))==null?void 0:a.focus({preventScroll:!0})})))}let b=B(S(()=>({as:t.as,type:v.type})),e.buttonRef);return()=>{var i;let a={open:e.menuState.value===0},u={ref:e.buttonRef,id:f,type:b.value,"aria-haspopup":!0,"aria-controls":(i=I(e.itemsRef))==null?void 0:i.id,"aria-expanded":t.disabled?void 0:e.menuState.value===0,onKeydown:l,onKeyup:o,onClick:s};return y({ourProps:u,theirProps:t,slot:a,attrs:v,slots:c,name:"MenuButton"})}}}),Z=P({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0}},setup(t,{attrs:v,slots:c,expose:p}){let e=M("MenuItems"),f=`headlessui-menu-items-${k()}`,l=x(null);p({el:e.itemsRef,$el:e.itemsRef}),j({container:S(()=>I(e.itemsRef)),enabled:S(()=>e.menuState.value===0),accept(a){return a.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:a.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(a){a.setAttribute("role","none")}});function o(a){var u;switch(l.value&&clearTimeout(l.value),a.key){case m.Space:if(e.searchQuery.value!=="")return a.preventDefault(),a.stopPropagation(),e.search(a.key);case m.Enter:if(a.preventDefault(),a.stopPropagation(),e.activeItemIndex.value!==null){let n=e.items.value[e.activeItemIndex.value];(u=I(n.dataRef.domRef))==null||u.click()}e.closeMenu(),R(()=>{var n;return(n=I(e.buttonRef))==null?void 0:n.focus({preventScroll:!0})});break;case m.ArrowDown:return a.preventDefault(),a.stopPropagation(),e.goToItem(g.Next);case m.ArrowUp:return a.preventDefault(),a.stopPropagation(),e.goToItem(g.Previous);case m.Home:case m.PageUp:return a.preventDefault(),a.stopPropagation(),e.goToItem(g.First);case m.End:case m.PageDown:return a.preventDefault(),a.stopPropagation(),e.goToItem(g.Last);case m.Escape:a.preventDefault(),a.stopPropagation(),e.closeMenu(),R(()=>{var n;return(n=I(e.buttonRef))==null?void 0:n.focus({preventScroll:!0})});break;case m.Tab:a.preventDefault(),a.stopPropagation();break;default:a.key.length===1&&(e.search(a.key),l.value=setTimeout(()=>e.clearSearch(),350));break}}function s(a){switch(a.key){case m.Space:a.preventDefault();break}}let b=K(),i=S(()=>b!==null?b.value===T.Open:e.menuState.value===0);return()=>{var a,u;let n={open:e.menuState.value===0},r={"aria-activedescendant":e.activeItemIndex.value===null||(a=e.items.value[e.activeItemIndex.value])==null?void 0:a.id,"aria-labelledby":(u=I(e.buttonRef))==null?void 0:u.id,id:f,onKeydown:o,onKeyup:s,role:"menu",tabIndex:0,ref:e.itemsRef};return y({ourProps:r,theirProps:t,slot:n,attrs:v,slots:c,features:w.RenderStrategy|w.Static,visible:i.value,name:"MenuItems"})}}}),ee=P({name:"MenuItem",props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1}},setup(t,{slots:v,attrs:c,expose:p}){let e=M("MenuItem"),f=`headlessui-menu-item-${k()}`,l=x(null);p({el:l,$el:l});let o=S(()=>e.activeItemIndex.value!==null?e.items.value[e.activeItemIndex.value].id===f:!1),s=S(()=>({disabled:t.disabled,textValue:"",domRef:l}));E(()=>{var n,r;let d=(r=(n=I(l))==null?void 0:n.textContent)==null?void 0:r.toLowerCase().trim();d!==void 0&&(s.value.textValue=d)}),E(()=>e.registerItem(f,s)),U(()=>e.unregisterItem(f)),V(()=>{e.menuState.value===0&&(!o.value||e.activationTrigger.value!==0&&R(()=>{var n,r;return(r=(n=I(l))==null?void 0:n.scrollIntoView)==null?void 0:r.call(n,{block:"nearest"})}))});function b(n){if(t.disabled)return n.preventDefault();e.closeMenu(),R(()=>{var r;return(r=I(e.buttonRef))==null?void 0:r.focus({preventScroll:!0})})}function i(){if(t.disabled)return e.goToItem(g.Nothing);e.goToItem(g.Specific,f)}function a(){t.disabled||o.value||e.goToItem(g.Specific,f,0)}function u(){t.disabled||!o.value||e.goToItem(g.Nothing)}return()=>{let{disabled:n}=t,r={active:o.value,disabled:n};return y({ourProps:{id:f,ref:l,role:"menuitem",tabIndex:n===!0?void 0:-1,"aria-disabled":n===!0?!0:void 0,onClick:b,onFocus:i,onPointermove:a,onMousemove:a,onPointerleave:u,onMouseleave:u},theirProps:t,slot:r,attrs:c,slots:v,name:"MenuItem"})}}});export{g as a,X as f,Y as m,Z as p,ee as v,H as x};
